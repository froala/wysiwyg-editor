/*!
 * froala_editor v5.0.0 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2026 Froala Labs
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("froala-editor")):"function"==typeof define&&define.amd?define(["froala-editor"],t):t(("undefined"!=typeof globalThis?globalThis:e||self).FroalaEditor)}(this,function(dt){"use strict";function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.assign(dt.POPUP_TEMPLATES,{"filesManager.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_PROGRESS_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),Object.assign(dt.DEFAULTS,{filesInsertButtons:["imageBack","|","filesUpload","filesByURL","filesEmbed"],filesInsertButtons2:["deleteAll","insertAll","cancel","minimize"],imageEditButtons:["imageReplace","imageAlign","imageCaption","imageRemove","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUpload:!0,filesManagerUploadURL:null,imageCORSProxy:"https://cors-anywhere.froala.com",imageUploadRemoteUrls:!0,filesManagerUploadParam:"file",filesManagerUploadParams:{},googleOptions:{},filesManagerUploadToS3:!1,filesManagerUploadToAzure:!1,filesManagerUploadMethod:"POST",filesManagerMaxSize:10485760,filesManagerAllowedTypes:["*"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered","fr-shadow":"Shadow"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1,imageDefaultMargin:5,imageAddNewLine:!1}),dt.VIDEO_PROVIDERS=[{test_regex:/^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g,url_text:"https://www.youtube.com/embed/$1?$2",html:'<iframe width="640" height="360" src="{url}&wmode=opaque" frameborder="0" allowfullscreen></iframe>',provider:"youtube"},{test_regex:/^.*(?:vimeo.com)\/(?:channels(\/\w+\/)?|groups\/*\/videos\/\u200b\d+\/|video\/|)(\d+)(?:$|\/|\?)/,url_regex:/(?:https?:\/\/)?(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?(\/[a-zA-Z0-9_\-]+)?/i,url_text:"https://player.vimeo.com/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vimeo"},{test_regex:/^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g,url_text:"https://www.dailymotion.com/embed/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"dailymotion"},{test_regex:/^.+(screen.yahoo.com)\/[^_&]+/,url_regex:"",url_text:"",html:'<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"yahoo"},{test_regex:/^.+(rutube.ru)\/[^_&]+/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g,url_text:"https://rutube.ru/play/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"rutube"},{test_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/,url_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/g,url_text:"https://play.vidyard.com/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vidyard"}],dt.VIDEO_EMBED_REGEX=/^\W*((<iframe(.|\n)*>(\s|\n)*<\/iframe>)|(<embed(.|\n)*>))\W*$/i,dt.IMAGE_EMBED_REGEX=/^\W*((<img(.|\n)*>(\s|\n)*))\W*$/i,dt.IMAGE_TYPE="image/png",dt.IMAGE_ALLOW_REGEX=/\.(gif|jpe?g|tiff?|png|webp|bmp)$/i,dt.PLUGINS.filesManager=function(w){var v,l,x,d,a,c,r,t,M=w.$,P="https://i.froala.com/upload",F=!1,n=!1,E=new Map,k=new Map,h=new Map,b=new Map,A=new Map,y=new Map,N=0,i=[],H=-1,C=[],f=0,K=["file","image","imageTUI","video"],Y=1,V=2,W=3,I=4,G=5,X=6,j=10,q=["video/avi","video/mpeg","video/x-ms-wmv"],s={};function Z(){var e=w.popups.get("filesManager.insert"),t=e.find(".fr-files-by-url-layer input");t.val(""),e.find(".fr-files-embed-layer textarea").val("").trigger("change"),t.trigger("change")}function J(e){w.hasOwnProperty("imageTUI")||(r="fr-disabled"),y.forEach(function(e,t){o(t)}),Q()?t=(t=w.popups.get("filesManager.insert"))||Ke():(t=w.popups.get("filesManager.insert"))||(i={buttons:'<div class="fr-buttons fr-tabs"></div>',upload_layer:i="<div style= 'padding:10px'>\n    <div class = 'fr-message'><h3 style ='font-size: 16px; margin: 10px 10px;font-weight: normal;'>".concat(w.language.translate(function(){var e="",t=function(){var t=[];return K.forEach(function(e){w.opts.pluginsEnabled.indexOf(e)<0&&t.push(e.charAt(0).toUpperCase()+e.slice(1))}),t}();e=t.join(", "),1<t.length?e+=" plugin are":e+=" plugin is";return e}()+" not enabled. Do you want to enable?"),"</h3></div>\n    <div style='text-align:right;'>\n      <button class='fr-trim-button fr-plugins-enable'>").concat(w.language.translate("Enable"),"</button>               \n      <button class='fr-trim-button fr-plugins-cancel'>").concat(w.language.translate("Cancel"),"</button>\n    </div>"),by_url_layer:"",embed_layer:"",upload_progress_layer:"",progress_bar:""},$e(i=w.popups.create("filesManager.insert",i)),t=i);var t,n,i=w.$tb.find('.fr-command[data-cmd="insertFiles"]');g(),!e&&t.hasClass("fr-active")||(e||le(),w.popups.refresh("filesManager.insert"),w.popups.setContainer("filesManager.insert",w.$tb),i.isVisible()?(n=(e=w.button.getPosition(i,E.size)).left,w.popups.show("filesManager.insert",n,e.top,i.outerHeight())):(w.position.forSelection(t),w.popups.show("filesManager.insert"))),w.popups.setPopupDimensions(t),Q()&&w.popups.setFileListHeight(t),t.find(".fr-upload-progress")&&0==E.size&&t.find(".fr-upload-progress").addClass("fr-none")}function Q(){var t=!0;return K.forEach(function(e){w.opts.pluginsEnabled.indexOf(e)<0&&(t=!1)}),t}function ee(){g()}function te(){var i,a,r,e,t,n,s,o,l;d||(w.shared.$image_resizer?(d=w.shared.$image_resizer,c=w.shared.$img_overlay,w.events.on("destroy",function(){M("body").first().append(d.removeClass("fr-active"))},!0)):(w.shared.$image_resizer=M(document.createElement("div")).attr("class","fr-image-resizer"),d=w.shared.$image_resizer,w.events.$on(d,"mousedown",function(e){e.stopPropagation()},!0),w.opts.imageResize&&(d.append(ne("nw")+ne("ne")+ne("sw")+ne("se")),w.shared.$img_overlay=M(document.createElement("div")).attr("class","fr-image-overlay"),c=w.shared.$img_overlay,e=d.get(0).ownerDocument,M(e).find("body").first().append(c))),w.events.on("shared.destroy",function(){d.html("").removeData().remove(),d=null,w.opts.imageResize&&(c.remove(),c=null)},!0),w.helpers.isMobile()||w.events.$on(M(w.o_win),"resize",function(){v&&!v.hasClass("fr-uploading")?z(!0):v&&(te(),replace(),p(!1))}),w.opts.imageResize&&(e=d.get(0).ownerDocument,w.events.$on(d,w._mousedown,".fr-handler",ae),w.events.$on(M(e),w._mousemove,re),w.events.$on(M(e.defaultView||e.parentWindow),w._mouseup,se),w.events.$on(c,"mouseleave",se),i=1,a=null,r=0,w.events.on("keydown",function(e){var t,n;v&&(t=-1!=navigator.userAgent.indexOf("Mac OS X")?e.metaKey:e.ctrlKey,((n=e.which)!==a||200<e.timeStamp-r)&&(i=1),(n==dt.KEYCODE.EQUALS||w.browser.mozilla&&n==dt.KEYCODE.FF_EQUALS)&&t&&!e.altKey?i=Ze.call(this,e,1,1,i):(n==dt.KEYCODE.HYPHEN||w.browser.mozilla&&n==dt.KEYCODE.FF_HYPHEN)&&t&&!e.altKey?i=Ze.call(this,e,2,-1,i):w.keys.ctrlKey(e)||n!=dt.KEYCODE.ENTER||(v.before("<br>"),R(v)),a=n,r=e.timeStamp)},!0),w.events.on("keyup",function(){i=1})));v&&((e=w.$wp||w.$sc).append(d),d.data("instance",w),t=e.scrollTop()-("static"!=e.css("position")?e.offset().top:0),n=e.scrollLeft()-("static"!=e.css("position")?e.offset().left:0),n-=w.helpers.getPX(e.css("border-left-width")),t-=w.helpers.getPX(e.css("border-top-width")),w.$el.is("img")&&w.$sc.is("body")&&(n=t=0),s=O(),$()&&(s=s.find(".fr-img-wrap")),l=o=0,w.opts.iframe&&(o=w.helpers.getPX(w.$wp.find(".fr-iframe").css("padding-top")),l=w.helpers.getPX(w.$wp.find(".fr-iframe").css("padding-left"))),d.css("top",(w.opts.iframe?s.offset().top+o:s.offset().top+t)-1).css("left",(w.opts.iframe?s.offset().left+l:s.offset().left+n)-1).css("width",s.get(0).getBoundingClientRect().width).css("height",s.get(0).getBoundingClientRect().height).addClass("fr-active"))}function ne(e){return'<div class="fr-handler fr-h'.concat(e,'"></div>')}function ie(e){($()?v.parents(".fr-img-caption"):v).css("width",e)}function ae(e){if(!w.core.sameInstance(d))return!0;if(e.preventDefault(),e.stopPropagation(),w.$el.find("img.fr-error").left)return!1;w.undo.canDo()||w.undo.saveStep();var t=e.pageX||e.originalEvent.touches[0].pageX;if("mousedown"==e.type){var e=w.$oel.get(0).ownerDocument,e=e.defaultView||e.parentWindow,n=!1;try{n=e.location!=e.parent.location&&!(e.$&&e.$.FE)}catch(i){}n&&e.frameElement&&(t+=w.helpers.getPX(M(e.frameElement).offset().left)+e.frameElement.clientLeft)}(a=M(this)).data("start-x",t),a.data("start-width",v.width()),a.data("start-height",v.height());n=v.width();w.opts.imageResizeWithPercent&&(e=v.parentsUntil(w.$el,w.html.blockTagsQuery()).get(0)||w.el,n=(n/M(e).outerWidth()*100).toFixed(2)+"%"),ie(n),c.show(),w.popups.hideAll(),st()}function re(e){var t,n;return!w.core.sameInstance(d)||(a&&v?(e.preventDefault(),!w.$el.find("img.fr-error").left&&!!(e=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null))&&(e=e-a.data("start-x"),n=a.data("start-width"),(a.hasClass("fr-hnw")||a.hasClass("fr-hsw"))&&(e=0-e),w.opts.imageResizeWithPercent?(t=v.parentsUntil(w.$el,w.html.blockTagsQuery()).get(0)||w.el,n=((n+e)/M(t).outerWidth()*100).toFixed(2),w.opts.imageRoundPercent&&(n=Math.round(n)),ie("".concat(n,"%")),(t=($()?w.helpers.getPX(v.parents(".fr-img-caption").css("width"))/M(t).outerWidth()*100:w.helpers.getPX(v.css("width"))/M(t).outerWidth()*100).toFixed(2))===n||w.opts.imageRoundPercent||ie("".concat(t,"%")),v.css("height","").removeAttr("height")):(n+e>=w.opts.imageMinWidth&&(ie(n+e),t=$()?w.helpers.getPX(v.parents(".fr-img-caption").css("width")):w.helpers.getPX(v.css("width"))),t!==n+e&&ie(t),((v.attr("style")||"").match(/(^height:)|(; *height:)/)||v.attr("height"))&&(v.css("height",a.data("start-height")*v.width()/a.data("start-width")),v.removeAttr("height"))),te(),void w.events.trigger("image.resize",[v]))):void 0)}function se(e){if(!w.core.sameInstance(d))return!0;if(a&&v){if(e&&e.stopPropagation(),w.$el.find("img.fr-error").left)return!1;a=null,c.hide(),te(),w.undo.saveStep(),w.events.trigger("image.resizeEnd",[v])}else d.removeClass("fr-active")}function oe(){y.forEach(function(e,t){var n=w.popups.get("filesManager.insert");n.find(".fr-checkbox-file-"+t).get(0).disabled=!0,document.getElementById("fr-file-autoplay-button-"+t)&&(document.getElementById("fr-file-autoplay-button-"+t).disabled=!0,document.getElementById("fr-file-autoplay-button-"+t).parentElement.classList.add("fr-checkbox-disabled"),document.getElementById("fr-file-autoplay-button-"+t).parentElement.classList.remove("fr-files-checkbox")),n.find(".fr-checkbox-"+t).get(0).classList.remove("fr-files-checkbox"),n.find(".fr-checkbox-"+t).get(0).classList.add("fr-checkbox-disabled")})}function L(e,t,n,i){w.edit.on(),v&&v.addClass("fr-error"),s[e]?(e!=W&&e!=V&&e!=I||Ie(100,i,!0),y.set(i,s[e]),oe(),y.forEach(function(e,t){w.popups.get("filesManager.insert"),document.getElementById("fr-file-edit-button-".concat(t))&&(document.getElementById("fr-file-edit-button-".concat(t)).classList.add("fr-disabled"),document.getElementById("fr-file-view-button-".concat(t)).classList.add("fr-disabled"),document.getElementById("fr-file-insert-button-".concat(t)).classList.add("fr-disabled"))}),ce(w.language.translate(s[e]),i)):ce(w.language.translate("Something went wrong. Please try again."),i),!v&&n&&Je(n),w.events.trigger("filesManager.error",[{code:e,message:s[e]},t,n])}function _(){var e=w.popups.get("filesManager.insert"),t=e.find('.fr-command[data-cmd="insertAll"]'),e=e.find('.fr-command[data-cmd="deleteAll"]'),i=!0;A.forEach(function(e,t,n){A.get(t)&&(i=!1)}),i?t.addClass("fr-disabled"):t.removeClass("fr-disabled"),i?e.addClass("fr-disabled"):e.removeClass("fr-disabled")}function o(e){k.get(e)&&k.get(e).link&&w.events.trigger("filesManager.removed",[k.get(e).link]);var t=w.popups.get("filesManager.insert");t.find(".fr-file-"+e).get(0)!==undefined&&(t.find(".fr-file-"+e).get(0).outerHTML=""),k["delete"](e),E["delete"](e),A["delete"](e),_(),0==E.size&&(f=0),y["delete"](e),w.popups.setPopupDimensions(t,!0),w.opts.toolbarBottom?J(!0):w.popups.setPopupDimensions(t),t.find(".fr-upload-progress")&&0==E.size&&t.find(".fr-upload-progress").addClass("fr-none")}function le(){for(var e=w.popups.get("filesManager.insert"),t=e.find(".fr-insert-checkbox"),n=0;n<t.length;n++)t.get(n).children.target.checked=!1,e.find(".fr-file-"+t.get(n).id.split("-").pop()).get(0).classList.add("fr-unchecked");if(x)document.getElementById("fr-file-autoplay-button-".concat(x))&&(document.getElementById("fr-file-autoplay-button-".concat(x)).checked=!1),C=C.filter(function(e){return e!=x});else{for(var i=e.find(".fr-file-autoplay-button"),a=0;a<i.length;a++)i.get(a).checked=!1;C=[]}A=new Map,_()}function p(e){var t,n,i=w.popups.get("filesManager.insert");(i=i||Ke()).find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),i.find(".fr-files-progress-bar-layer").addClass("fr-active"),i.find(".fr-buttons").hide(),v&&(i=O(),w.popups.setContainer("filesManager.insert",w.$sc),t=i.offset().left,n=i.offset().top+i.height(),w.popups.show("filesManager.insert",t,n,i.outerHeight())),void 0===e&&S(w.language.translate("Uploading"),0)}function g(e){var t=w.popups.get("filesManager.insert");t&&(t.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),t.find(".fr-files-progress-bar-layer").removeClass("fr-active"),t.find(".fr-buttons").show(),e||w.$el.find("img.fr-error").length)&&(w.events.focus(),w.$el.find("img.fr-error").length&&(w.$el.find("img.fr-error").remove(),w.undo.saveStep(),w.undo.run(),w.undo.dropRedo()),!w.$wp&&v&&(t=v,z(!0),w.selection.setAfter(t.get(0)),w.selection.restore()),w.popups.hide("filesManager.insert"))}function S(e,t){var n=w.popups.get("filesManager.insert");n&&((n=n.find(".fr-files-progress-bar-layer")).find("h3").text(e+(t?" ".concat(t,"%"):"")),n.removeClass("fr-error"),t?(n.find("div").removeClass("fr-indeterminate"),n.find("div > span").css("width","".concat(t,"%"))):n.find("div").addClass("fr-indeterminate"))}function de(e){p();var t=w.popups.get("filesManager.insert").find(".fr-files-progress-bar-layer"),t=(t.addClass("fr-error"),t.find("h3"));t.text(e),w.events.disableBlur(),t.focus()}function ce(e,t){var n=w.popups.get("filesManager.insert"),i=n.find(".fr-upload-progress-layer"),t=n.find(".fr-file-".concat(t));i.addClass("fr-error"),t.find("h5").text(e)}s[Y]="File cannot be loaded from the passed link.",s[V]="No link in upload response.",s[W]="Error during file upload.",s[I]="Parsing response failed.",s[G]="File is too large.",s[X]="File type is invalid.",s[7]="Files can be uploaded only to same domain in IE 8 and IE 9.",s[8]="File is corrupted.",s[9]="Error during file loading.";var fe,pe,ge,u,ue,me,ve,he,be,ye,m="";function we(e){m=e,fe=document.getElementsByClassName(e),Array.prototype.map.call(fe,function(e){e.addEventListener("dragover",function(e){e.preventDefault(),e.stopPropagation(),pe=e.pageX,ge=e.pageY;e=document.getElementById("filesList");ge+20>e.getBoundingClientRect().bottom&&xe(e,0,10),ge-20<e.getBoundingClientRect().top&&xe(e,0,-10)},!1),w.helpers.isMobile()&&e.getElementsByClassName("dot")[0].addEventListener("touchmove",function(e){e.preventDefault(),e.stopPropagation();for(var t=e.target;t&&!t.classList.contains(m);)t=t.parentElement;for(var n=document.elementFromPoint(e.targetTouches[0].clientX,e.targetTouches[0].clientY);n&&!n.classList.contains(m);)n=n.parentElement;var i=document.getElementsByClassName("fr-hovered-over-file"),i=(Array.prototype.forEach.call(i,function(e){e.classList.remove("fr-hovered-over-file")}),n&&!t.classList.contains("fr-unchecked")&&n.classList.add("fr-hovered-over-file"),document.getElementById("filesList"));e.targetTouches[0].clientY+5>i.getBoundingClientRect().bottom&&xe(i,0,5),e.targetTouches[0].clientY-5<i.getBoundingClientRect().top&&xe(i,0,-5)},!1),e.ondrag=Me,e.ondragend=Ee,w.helpers.isMobile()&&((e=e.getElementsByClassName("dot"))[0].addEventListener("touchmove",Me,!1),e[0].addEventListener("touchend",Ee,!1))})}function xe(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Me(e){for(w.helpers.isMobile()&&(ue=event.touches[0].clientX,me=event.touches[0].clientY),u=e.target;!u.classList.contains(m);)u=u.parentElement;!u.classList.contains(m)||u.classList.contains("fr-unchecked")?u=undefined:w.helpers.isMobile()&&u.classList.add("drag-sort-active")}function Ee(e){var t,n,i;if(u!==undefined){if(w.helpers.isMobile())for(n=ue,i=me,t=event.target;!t.classList.contains(m);)t=t.parentElement;else n=event.clientX,i=event.clientY;w.helpers.isMobile()||!w.browser.safari&&!w.browser.mozilla||(n=pe,i=ge);for(var a=document.elementFromPoint(n,i);a&&!a.classList.contains(m);)a=a.parentElement;if(a&&!a.classList.contains(m))a=undefined;else if(a&&u!==a){var r,s,o=u,l=a,d=o.parentNode,c=l.parentNode;if(d&&c&&!d.isEqualNode(l)&&!c.isEqualNode(o)){for(var f=0;f<d.children.length;f++)d.children[f].isEqualNode(o)&&(r=f);for(f=0;f<c.children.length;f++)c.children[f].isEqualNode(l)&&(s=f);d.isEqualNode(c)&&r<s&&s++,d.insertBefore(l,d.children[r]),c.insertBefore(o,c.children[s])}}w.helpers.isMobile()&&(t.classList.remove("fr-hovered-over-file"),a.classList.remove("fr-hovered-over-file"))}}function T(e){var i=w.popups.get("filesManager.insert"),t=(i.find(".fr-upload-progress-layer").hasClass("fr-active")||i.find(".fr-upload-progress-layer").addClass("fr-active"),i.find(".fr-upload-progress").removeClass("fr-none"),E.get(e)),n=function(e){var t,n={weekday:"long",year:"numeric",month:"long",day:"numeric"};try{t=e.toLocaleDateString(w.opts.language||undefined,n)}catch(i){t=e.toLocaleDateString(undefined,n)}return t+""}(new Date),a=A.get(e)?"":"fr-unchecked ",a="\n        <div id='fr-file-".concat(e,"' class='fr-file-list-item fr-file-").concat(e," ").concat(a,"' draggable = \"").concat(!a,'" >\n        <div class=\'fr-file-item-left\' >\n\n    \n            <div class="fr-file-item-insert-checkbox fr-files-checkbox-line">\n            ').concat(w.helpers.isMobile()?"<div id='fr-pick-".concat(e,"}' class='dot'>\n            </div>"):"",'\n            <div id="checkbox-key-').concat(e,'" class="fr-files-checkbox fr-insert-checkbox  fr-checkbox-').concat(e,'">\n            <input name="target" class="fr-insert-attr fr-checkbox-file-').concat(e,' fr-file-insert-check" data-cmd="fileInsertCheckbox"\n             data-checked="_blank" type="checkbox" id="fr-link-target-').concat(w.id,'" tabIndex="0" />\n            <span>').concat('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>','\n            </span>\n        </div>\n                <label id="fr-label-target-').concat(w.id,"\"></label>\n            </div>\n    \n            <div class='fr-file-item-icon fr-file-item-icon-").concat(e,"' >\n                <img src='https://secure.webtoolhub.com/static/resources/icons/set112/f2afb6f7.png' alt='Image preview' class='fr-thumbnail-padding' height='36px' width='36px' />\n            </div>\n\n            <div class='fr-file-item-description' >\n                <div class='fr-file-name fr-files-manager-tooltip'>\n                   ").concat(function(e,t,n){null==n&&(n="...");return e.length>t?e.substring(0,t-n.length)+n:e}(t.name,20),'\n                      <span class="').concat(20<t.name.length?"tooltiptext":"fr-none",'">').concat(t.name,"\n                      </span>\n                 </div>\n                 <div class='fr-file-details'>\n                 <div class='fr-file-date'>").concat(n,"\n                 </div>\n \n                 <div class='fr-file-size'>\n                     ").concat(0==(a=t.size)?"0 Bytes":(n=Math.floor(Math.log(a)/Math.log(1024))," | "+ +(a/Math.pow(1024,n)).toFixed(2)+" "+["Bytes","KB","MB","GB","TB"][n]),"\n                 </div>\n                 </div>\n\n                  <div class='fr-file-error'>\n                    <h5 class='fr-file-error-h5'></h5>\n                 </div>\n             </div>\n    \n        </div>\n\n        <div class='fr-file-item-right fr-file-item-right-").concat(e,"'>")+Ce(e)+"</div>\n    </div>";i.find(".fr-upload-progress-layer")[0].innerHTML=a+i.find(".fr-upload-progress-layer")[0].innerHTML,E.forEach(function(e,t,n){A.get(t)&&i.find("input.fr-insert-attr.fr-checkbox-file-".concat(t))[0].setAttribute("checked",null)}),C.forEach(function(e){document.getElementById("fr-file-autoplay-button-"+e).checked=!0}),Ae(e,t),g(),w.opts.toolbarBottom?J(!0):w.popups.setPopupDimensions(i),we("fr-file-list-item")}function ke(e){switch(e){case"application/msword":return w.icon.getFileIcon("docIcon");case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return w.icon.getFileIcon("docxIcon");case"image/gif":return w.icon.getFileIcon("gifIcon");case"image/jpeg":return w.icon.getFileIcon("jpegIcon");case"image/jpeg":return w.icon.getFileIcon("jpgIcon");case"type/text":return w.icon.getFileIcon("logIcon");case"video/quicktime":return w.icon.getFileIcon("movIcon");case"audio/mp3":case"audio/mpeg":return w.icon.getFileIcon("mp3Icon");case"video/mp4":return w.icon.getFileIcon("mp4Icon");case"audio/ogg":return w.icon.getFileIcon("oggIcon");case"video/ogg":return w.icon.getFileIcon("ogvIcon");case"application/pdf":return w.icon.getFileIcon("pdfIcon");case"image/png":return w.icon.getFileIcon("pngIcon");case"text/plain":return w.icon.getFileIcon("txtIcon");case"video/webm":return w.icon.getFileIcon("webmIcon");case"image/webp":return w.icon.getFileIcon("webpIcon");case"video/x-ms-wmv":return w.icon.getFileIcon("wmvIcon");case"application/vnd.ms-excel":return w.icon.getFileIcon("xlsIcon");case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return w.icon.getFileIcon("xlsxIcon");case"application/x-zip-compressed":case"application/zip":return w.icon.getFileIcon("zipIcon");default:return w.icon.getFileIcon("defaultIcon")}}function Ae(i,a,e){var r,s=w.popups.get("filesManager.insert"),t=s.find(".fr-file-item-icon-"+i).get(0);D(B(a))&&"image/gif"!=B(a)&&"image/webp"!=B(a)?("a"!=t.children[0].localName&&(t.innerHTML="<a target='_blank' href=''>"+t.innerHTML+"</a>"),s.find(".fr-file-item-icon-"+i).get(0).children[0].children[0],r=new FileReader,null!=e&&e&&(e=E.get(i),a.name=e.name,E.set(i,a)),r.onloadend=function(){s.find(".fr-file-item-icon-"+i).get(0).children[0].children[0].src=r.result;for(var e=atob(r.result.split(",")[1]),t=[],n=0;n<e.length;n++)t.push(e.charCodeAt(n));s.find(".fr-file-item-icon-"+i).get(0).children[0].href=window.URL.createObjectURL(new Blob([new Uint8Array(t)],{type:B(a)})),s.find(".fr-file-item-icon-"+i).get(0).classList.add("fr-file-item-thumbnail-hover")},a?r.readAsDataURL(a):(e=ke(B(a)),t.innerHTML='<svg height="40px" width="40px" viewBox="0 0 55 5" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        '.concat(e.path,"\n        </svg>"))):(e=ke(B(a)),t.innerHTML='<svg height="40px" width="40px" viewBox="0 0 55 55" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      '.concat(e.path,"\n      </svg>"))}function Ce(e){var t="",n=(Fe(B(E.get(e)))&&(n="fr-files-checkbox",i="",He(B(E.get(e)))||(n="fr-checkbox-disabled",i="disabled"),t='\n      <div class="fr-files-checkbox-line align-autoplay">\n      <div id="checkbox-key-'.concat(e,'" class="').concat(n," fr-autoplay-checkbox  fr-checkbox-").concat(e,'">  \n                   \n      <input type="checkbox" id="fr-file-autoplay-button-').concat(e,'" class="fr-file-button-').concat(e,' fr-file-autoplay-button" data-title="Edit" data-param1="').concat(e,'" role="button" ').concat(i,"/>\n\n      <span>").concat('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>'," </span>\n      </div>      \n      <label  class='fr-autoplay-checkbox-label'>Autoplay </label>\n      </div>")),"application/msword"),i="application/vnd.openxmlformats-officedocument.wordprocessingml.document",a="";return!Ne(B(E.get(e)))&&He(B(E.get(e)))||(r="fr-disabled"),Fe(B(E.get(e)))&&(r="fr-disabled"),U(B(E.get(e)))&&(r="fr-disabled",B(E.get(e))!=n&&B(E.get(e))!=i||w.opts.googleOptions&&!w.helpers.isMobile()&&w.opts.googleOptions.API_KEY&&w.opts.googleOptions.CLIENT_ID&&(r=""),"text/plain"!=B(E.get(e))&&B(E.get(e))!=n&&"application/pdf"!=B(E.get(e))&&B(E.get(e))!=i&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=B(E.get(e))&&"application/vnd.ms-excel"!=B(E.get(e))&&"type/text"!=B(E.get(e))||(a="")),"video/url"===B(E.get(e))&&(r="fr-disabled"),t+='<div class=\'fr-file-item-action-buttons\' >\n                <button type="button" id="fr-file-insert-button-'.concat(e,'" class=" fr-doc-edit-').concat(e," fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \n                fr-file-button-").concat(e," fr-file-insert-button-").concat(e,' fr-file-insert-button" data-cmd="imageInsertByUpload" data-title="Insert" data-param1="').concat(e,'" tabIndex="2" role="button">\n                <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "-5 0 28 28" xlmns = "http://w3.org/200/svg"><path d = \'M 9.25 12 L 6.75 12 C 6.335938 12 6 11.664062 6 11.25 L 6 6 L 3.257812 6 C 2.703125 6 2.425781 5.328125 2.820312 4.933594 L 7.570312 0.179688 C 7.804688 -0.0546875 8.191406 -0.0546875 8.425781 0.179688 L 13.179688 4.933594 C 13.574219 5.328125 13.296875 6 12.742188 6 L 10 6 L 10 11.25 C 10 11.664062 9.664062 12 9.25 12 Z M 16 11.75 L 16 15.25 C 16 15.664062 15.664062 16 15.25 16 L 0.75 16 C 0.335938 16 0 15.664062 0 15.25 L 0 11.75 C 0 11.335938 0.335938 11 0.75 11 L 5 11 L 5 11.25 C 5 12.214844 5.785156 13 6.75 13 L 9.25 13 C 10.214844 13 11 12.214844 11 11.25 L 11 11 L 15.25 11 C 15.664062 11 16 11.335938 16 11.75 Z M 12.125 14.5 C 12.125 14.15625 11.84375 13.875 11.5 13.875 C 11.15625 13.875 10.875 14.15625 10.875 14.5 C 10.875 14.84375 11.15625 15.125 11.5 15.125 C 11.84375 15.125 12.125 14.84375 12.125 14.5 Z M 14.125 14.5 C 14.125 14.15625 13.84375 13.875 13.5 13.875 C 13.15625 13.875 12.875 14.15625 12.875 14.5 C 12.875 14.84375 13.15625 15.125 13.5 15.125 C 13.84375 15.125 14.125 14.84375 14.125 14.5 Z M 14.125 14.5 \'></path></svg>\n                </button>\n\n                <button type="button" id="fr-file-edit-button-').concat(e,'" class=" fr-doc-edit-').concat(e," ").concat(r," fr-img-icon fr-btn fr-command fr-submit \n                fr-file-action-icons fr-file-edit-button-").concat(e," fr-file-button-").concat(e,' fr-file-edit-button" data-cmd="editImage" data-title="Edit" data-param1="').concat(e,'" role="button">\n                <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "0 4 25 25" xlmns = "http://w3.org/200/svg"><path d = \'M17,11.2L12.8,7L5,14.8V19h4.2L17,11.2z M7,16.8v-1.5l5.6-5.6l1.4,1.5l-5.6,5.6H7z M13.5,6.3l0.7-0.7c0.8-0.8,2.1-0.8,2.8,0  c0,0,0,0,0,0L18.4,7c0.8,0.8,0.8,2,0,2.8l-0.7,0.7L13.5,6.3z\'></path></svg>\n                </button>\n                \n                <span class="fr-file-view-').concat(e,'"><button type="button" id="fr-file-view-button-').concat(e,'" class=" fr-doc-edit-').concat(e," ").concat(a," fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \n                fr-file-view-button-").concat(e,' fr-file-view-button" data-cmd="viewImage" data-title="View" data-param1="').concat(e,'" tabIndex="2" role="button">\n                <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "15 19 21 21" xlmns = "http://w3.org/200/svg"> <path style="fill:none;stroke-width:0.9077;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 19.086094 16.541466 C 16.185625 16.541466 14.318281 19.447115 14.318281 19.447115 L 14.318281 19.555288 C 14.318281 19.555288 16.176719 22.475962 19.077187 22.475962 C 21.977656 22.475962 23.847969 19.576322 23.847969 19.576322 L 23.847969 19.465144 C 23.847969 19.465144 21.989531 16.541466 19.086094 16.541466 Z M 19.07125 21.024639 C 18.248906 21.024639 17.583906 20.357572 17.583906 19.53726 C 17.583906 18.716947 18.248906 18.04988 19.07125 18.04988 C 19.890625 18.04988 20.555625 18.716947 20.555625 19.53726 C 20.555625 20.357572 19.890625 21.024639 19.07125 21.024639 Z M 19.07125 21.024639 " transform="matrix(1.315789,0,0,1.3,0,0)"/></svg></button></span>\n\n                <button type="button" id="fr-file-delete-button-').concat(e,'" class=" fr-doc-edit-').concat(e," fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons\n                fr-file-button-").concat(e,' fr-file-delete-button" data-cmd="deleteImage" data-title="Delete" data-param1="').concat(e,'" role="button">\n                <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "-2 3 30 30" xlmns = "http://w3.org/200/svg"><path d = \'M15,10v8H9v-8H15 M14,4H9.9l-1,1H6v2h12V5h-3L14,4z M17,8H7v10c0,1.1,0.9,2,2,2h6c1.1,0,2-0.9,2-2V8z\'></path></svg>\n                </button>\n                 \n            </div>\n            <div id="user_area-').concat(e,"\" style=\"display: none;\">\n            \n              <div id=\"file_container\"></div>\n\n              <div style='display:block;text-align: center; margin-left:50%; id='edit-file-loader' class='fr-file-loader'></div>\n\n          </div> \n            ")}function Ie(e,t,n){var i,a,r=w.popups.get("filesManager.insert");!n&&e<=100?(r.find(".fr-checkbox-file-"+t).get(0).disabled=!0,r.find(".fr-checkbox-"+t).get(0).classList.remove("fr-files-checkbox"),r.find(".fr-checkbox-"+t).get(0).classList.add("fr-checkbox-disabled"),i=r.find(".fr-file-progress-circle-"+t),a=r.find(".fr-file-upload-percent-"+t),50<e?i.get(0).setAttribute("class","fr-file-progress-circle-"+t+" progress-circle p"+Math.floor(e)+" over50"):i.get(0).setAttribute("class","fr-file-progress-circle-"+t+" progress-circle p"+Math.floor(e)),a.get(0).innerHTML=Math.floor(e)+"%",Le(t,e,n)):n&&(r.find(".fr-checkbox-file-"+t).get(0).disabled=!1,r.find(".fr-checkbox-"+t).get(0).classList.remove("fr-checkbox-disabled"),r.find(".fr-checkbox-"+t).get(0).classList.add("fr-files-checkbox"),r.find(".fr-file-item-right-"+t).get(0).innerHTML=Ce(t),Le(t,100,n))}function Le(e,t,n){var i=w.popups.get("filesManager.insert"),a=(i.find(".fr-progress-bar").removeClass("fr-none").addClass("fr-display-block"),i.find(".fr-upload-progress").hasClass("fr-height-set")&&w.popups.setFileListHeight(i),0);b.set(e,t),b.forEach(function(e,t){a+=e}),a/=b.size,100==t&&n&&N++,i.find('.fr-command[data-cmd="filesUpload"]').addClass("fr-disabled"),i.find('.fr-command[data-cmd="filesByURL"]').addClass("fr-disabled"),i.find('.fr-command[data-cmd="filesEmbed"]').addClass("fr-disabled"),i.find(".fr-progress-bar").get(0).style.width=a+"%",N==b.size&&(i.find(".fr-progress-bar").removeClass("fr-display-block").addClass("fr-none"),b=new Map,N=0,i.find('.fr-command[data-cmd="filesUpload"]').removeClass("fr-disabled"),i.find('.fr-command[data-cmd="filesByURL"]').removeClass("fr-disabled"),i.find('.fr-command[data-cmd="filesEmbed"]').removeClass("fr-disabled"))}function _e(n,i){g(),w.popups.get("filesManager.insert").find(".fr-upload-progress-layer").addClass("fr-active"),n.forEach(function(e,t){D(B(e))&&w.opts.imageUploadRemoteUrls&&w.opts.imageCORSProxy&&w.opts.imageUpload?Oe(e,n,0,i[t]):k.set(i[t],e)})}function R(e){e&&e.get&&!function(e){if("false"==M(this).parents("[contenteditable]").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable"))return!0;if(e&&"touchend"==e.type&&ye)return!0;if(e&&w.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1;for(var t=0;t<dt.INSTANCES.length;t++)dt.INSTANCES[t]!=w&&dt.INSTANCES[t].events.trigger("image.hideResizer");w.toolbar.disable(),e&&(e.stopPropagation(),e.preventDefault());w.helpers.isMobile()&&(w.events.disableBlur(),w.$el.blur(),w.events.enableBlur());w.opts.iframe&&w.size.syncIframe();v=M(this),te(),w.browser.msie?(w.popups.areVisible()&&w.events.disableBlur(),w.win.getSelection&&(w.win.getSelection().removeAllRanges(),w.win.getSelection().addRange(w.doc.createRange()))):w.selection.clear();w.helpers.isIOS()&&(w.events.disableBlur(),w.$el.blur());w.button.bulkRefresh(),w.events.trigger("video.hideResizer")}.call(e.get(0))}function Se(){var e=M(this);e.removeClass("fr-uploading"),e.next().is("br")&&e.next().remove(),(0==i.length||0<i.length&&i.length==H)&&(t=e),"VIDEO"==e.get(0).tagName||"AUDIO"==e.get(0).tagName?w.selection.setAfter(e.parent()):w.selection.setAfter(e),w.undo.saveStep(),w.events.trigger("filesManager.loaded",[e]),Re(i)}function Te(){for(var e=Array.prototype.slice.call(w.el.querySelectorAll("video, .fr-video > *")),t=[],n=0;n<e.length;n++)t.push(e[n].getAttribute("src")),M(e[n]).toggleClass("fr-draggable",w.opts.videoMove),""===e[n].getAttribute("class")&&e[n].removeAttribute("class"),""===e[n].getAttribute("style")&&e[n].removeAttribute("style");if(ve)for(n=0;n<ve.length;n++)t.indexOf(ve[n].getAttribute("src"))<0&&w.events.trigger("video.removed",[M(ve[n])]);ve=e}function Re(e){null!=e&&(0==e.length?null!=t&&("VIDEO"==t.get(0).tagName?w.video._editVideo(t.parent()):"IMG"==t.get(0).tagName?w.image.edit(t):t.trigger("click"),w.toolbar.disable()):De(e.shift(),e))}function Be(e){var t,n,i,a=!1;Fe(B(k.get(e)))?(w.trimVideoPlugin.trimVideo(E.get(e),e,E),a=!0):D(B(k.get(e)))?(t=k.get(e).link,(n=w.o_doc.createElement("img")).src=t,v=n,l=e,w.imageTUI.launch(w,!1,e),a=!0):U(B(k.get(e)))&&(t={apiKey:w.opts.googleOptions.API_KEY,clientId:w.opts.googleOptions.CLIENT_ID,authorizeButton:"authorize_button-".concat(e),signoutButton:"signout_button",userArea:"user_area-".concat(e),fileInput:"file_input",fileIndex:e,file:E.get(e),fileContainer:"file_container",loadingText:"File is being uploaded...",events:{onInvalidFile:function(e){},onError:function(e){}}},be=function(c){var i,e=["https://www.googleapis.com/discovery/v1/apis/drive/v2/rest"],f="id,title,mimeType,userPermission,editable,copyable,shared,fileSize",p="-------314159265358979323846",g="\r\n--"+p+"\r\n",u="\r\n--"+p+"--",t=(document.getElementById(c.authorizeButton),document.getElementById(c.userArea));c.events||(c.events={});function n(){gapi.client.init({apiKey:c.apiKey,clientId:c.clientId,discoveryDocs:e,scope:"https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.appdata"}).then(function(){gapi.auth2.getAuthInstance().isSignedIn.listen(a),a(gapi.auth2.getAuthInstance().isSignedIn.get()),!gapi.auth2.getAuthInstance().isSignedIn.get()||gapi.auth.getToken()!==undefined&&gapi.auth.getToken().access_token===undefined?Promise.resolve(gapi.auth2.getAuthInstance().signIn()).then(function(){s()}):s()},function(e){c.events.onError(e)})}function a(e){e&&(t.style.display="block")}function r(e){var t=gapi.auth.getToken().access_token,t="https://docs.google.com/feeds/download/documents/export/Export?id="+i+"&format=docx&access_token="+t,n=new XMLHttpRequest;n.open("get",t),n.responseType="arraybuffer",n.onload=function(){var e=new Blob([new Uint8Array(this.response)],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),t=E.get(c.fileIndex);e.name=t.name,e.lastModified=t.lastModified,e.lastModifiedDate=t.lastModifiedDate,E.set(c.fileIndex,e),w.filesManager.upload(e,k,v,c.fileIndex),o()},n.send()}function s(){for(var e=c.fileIndex,t=document.getElementsByClassName("fr-doc-edit-".concat(e)),n=0;n<t.length;n++)t[n].setAttribute("disabled",!0),t[n].classList.add("fr-disabled");var o,l,d,e=c.file;e?(o=e,l=m,(d=new FileReader).readAsArrayBuffer(o),d.onload=function(e){for(var t={title:o.name,mimeType:"application/vnd.google-apps.document"},n="",i=new Uint8Array(d.result),a=i.byteLength,r=0;r<a;r++)n+=String.fromCharCode(i[r]);var s=btoa(n),t=g+"Content-Type: application/json; charset=UTF-8\r\n\r\n"+JSON.stringify(t)+g+"Content-Type: application/octet-stream\r\nContent-Transfer-Encoding: base64\r\n\r\n"+s+u,s=gapi.client.request({path:"/upload/drive/v2/files",method:"POST",params:{uploadType:"multipart",fields:f},headers:{"Content-Type":'multipart/related; boundary="'+p+'"',"Content-Length":t.Length},body:t});l=l||function l(e){},s.execute(function(e,t){e.error?c.events.onError(e.error):l(e)})}):c.events.onInvalidFile("File is not selected")}function m(e){i=e.id;var e="https://docs.google.com/document/d/"+e.id+"/edit",t=w.o_doc.body,n=w.o_doc.createElement("div");n.setAttribute("id","editDocContainer"),n.style.cssText="position: fixed; top: 0;left: 0;padding: 0;width: 100%;height: 100%;background: rgba(255,255,255,1);z-index: 9998;display:block",n.innerHTML='<div style="margin-top:25px; text-align:center"><label>Sign Out : </label><input type="checkbox" id ="markSignOut" role="button"/>  <button id="signout_button"  class="fr-trim-button" >Save </button> <button id="cancel_file_edit" class="fr-trim-button">Cancel</button></div>  <iframe title="Edit your file" frameBorder="0" width="100%" height="700px" src="'+e+'"></iframe>',t.appendChild(n),document.getElementById("signout_button").onclick=r,document.getElementById("cancel_file_edit").onclick=o}function o(){document.getElementById("markSignOut").checked&&gapi.auth2.getAuthInstance().signOut().then(function(){gapi.auth.getToken()&&(gapi.auth.getToken().access_token=undefined)});for(var e=document.getElementById("editDocContainer"),e=(e.parentNode.removeChild(e),document.getElementById("user_area-".concat(c.fileIndex))&&(document.getElementById("user_area-".concat(c.fileIndex)).style.display="none"),c.fileIndex),t=document.getElementsByClassName("fr-doc-edit-".concat(e)),n=0;n<t.length;n++)t[n].removeAttribute("disabled"),t[n].classList.remove("fr-disabled")}c.events.onInvalidFile=c.events.onInvalidFile||function(e){},c.events.onError=c.events.onError||function(e){};var l={handleClientLoad:function(){gapi.load("client:auth2",n)}};return l}(t),n=function(){},i=function i(e,t){var n=document.createElement("script");n.src=e,n.onload=function(){this.onload=function(){},be.handleClientLoad()},n.onreadystatechange=function(){"complete"===this.readyState&&this.onload()},(document.getElementsByTagName("head")[0]||document.body).appendChild(n)},0!=(e=["https://apis.google.com/js/api.js"]).length?i(e.shift()):n&&n()),a&&(F=!0)}function B(e){var n,i;return""==e.type?e.name&&e.name.endsWith(".msg")?n="application/vnd.ms-outlook":(i=/(?:\.([^.]+))?$/.exec(e.name)[1],[[".doc","application/msword"],[".docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],[".gif","image/gif"],[".jpeg","image/jpeg"],[".jpg","image/jpeg"],[".txt","text/plain"],[".log","type/text"],[".mov","video/quicktime"],[".mp3","audio/mpeg"],[".mp4","video/mp4"],[".ogg","audio/ogg"],[".ogv","video/ogg"],[".pdf","application/pdf"],[".png","image/png"],[".webm","video/webm"],[".webp","image/webp"],[".wmv","video/x-ms-wmv"],[".xls","application/vnd.ms-excel"],[".xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],[".zip","application/x-zip-compressed"],[".hex","application/octet-stream"]].forEach(function(e,t){e[0]==".".concat(i)&&(n=e[1])}),n):e.type}function De(o,e){if(U(B(k.get(o)))||!He(B(k.get(o)))){var t,n=k.get(o).link,i=k.get(o).text,a=k.get(o).data,r=(!i&&E.get(o)&&E.get(o).name&&(i=E.get(o).name),k.get(o).response),s=(w.edit.on(),w.events.focus(!0),w.selection.restore(),w.opts.fileUseSelectedText&&w.selection.text().length&&(i=w.selection.text()),'<a href="'.concat(n,'" target="_blank" id="fr-inserted-file" '));if(void 0!==a)for(t in a)a.hasOwnProperty(t)&&"link"!=t&&(s+="".concat(t,'="').concat(a[t],'" '));-1==s.indexOf(' class="')&&(s+='class="fr-file" '),s+=">".concat(i,"</a>"),w.html.insert(s);n=w.$el.find("#fr-inserted-file");n.removeAttr("id"),w.undo.saveStep();for(var l=Array.prototype.slice.call(w.el.querySelectorAll("a.fr-file")),d=[],c=0;c<l.length;c++)d.push(l[c].getAttribute("href"));if(he)for(c=0;c<he.length;c++)d.indexOf(he[c].getAttribute("href"))<0&&w.events.trigger("file.unlink",[he[c]]);he=l,w.selection.clear(),w.selection.setAfter(n),w.events.trigger("file.inserted",[n,r]),Re(e)}D(B(k.get(o)))&&He(B(k.get(o)))&&(f=k.get(o).link,i=k.get(o).sanitize,p=k.get(o).data,g=k.get(o).$existing_img,u=k.get(o).response,g&&"string"==typeof g&&(g=w.$(g)),w.edit.off(),S(w.language.translate("Loading image")),i&&(f=w.helpers.sanitizeURL(f)),(n=new Image).onload=function(){var e,t;if(g){w.undo.canDo()||g.hasClass("fr-uploading")||w.undo.saveStep();for(var n=g.data("fr-old-src"),i=(g.data("fr-image-pasted")&&(n=null),w.$wp?((e=g.clone().removeData("fr-old-src").removeClass("fr-uploading").removeAttr("data-fr-image-pasted")).off("load"),n&&g.attr("src",n),g.replaceWith(e)):e=g,e.get(0).attributes),a=0;a<i.length;a++){var r=i[a];0===r.nodeName.indexOf("data-")&&e.removeAttr(r.nodeName)}if(void 0!==p)for(t in p)p.hasOwnProperty(t)&&"link"!=t&&e.attr("data-".concat(t),p[t]);e.on("load",Se),e.attr("src",f),w.edit.on(),w.undo.saveStep(),w.events.disableBlur(),w.$el.blur(),w.events.trigger(n?"image.replaced":"image.inserted",[e,u])}else e=function(e,t,n){var i,a=M(document.createElement("img")).attr("src",e);if(t&&void 0!==t)for(i in t)t.hasOwnProperty(i)&&"link"!=i&&(" data-".concat(i,'="').concat(t[i],'"'),a.attr("data-".concat(i),t[i]));e=w.opts.imageDefaultWidth;e&&"auto"!=e&&(e=w.opts.imageResizeWithPercent?"100%":"".concat(e,"px"));a.attr("style",e?"width: ".concat(e,";"):""),ot(a,w.opts.imageDefaultDisplay,w.opts.imageDefaultAlign),a.on("load",n),a.on("error",n),w.edit.on(),w.events.focus(!0),w.selection.restore(),w.undo.saveStep(),w.opts.imageSplitHTML?w.markers.split():w.markers.insert();w.html.wrap();e=w.$el.find(".fr-marker");e.length?(e.parent().is("hr")&&e.parent().after(e),w.node.isLastSibling(e)&&e.parent().hasClass("fr-deletable")&&e.insertAfter(e.parent()),e.replaceWith(a)):w.$el.append(a);return a}(f,p,Se),w.undo.saveStep(),w.events.disableBlur(),w.$el.blur(),w.events.trigger("image.inserted",[e,u])},n.onerror=function(){L(Y,null,null,o),Re(e)},n.src=f),(Fe(B(k.get(o)))||Ne(B(k.get(o))))&&He(B(k.get(o)))&&(x=o,"video/url"==B(k.get(o))?(r=!1,(r=document.getElementById("fr-file-autoplay-button-"+o)!==undefined?document.getElementById("fr-file-autoplay-button-"+o).checked:r)&&k.get(o)!==undefined&&-1<k.get(o).video.indexOf("iframe")&&k.get(o).video.indexOf("autoplay=1")<0?(i="&",(n=(n=(n=k.get(o).video.substring(k.get(o).video.indexOf("src")+3)).substring(n.indexOf('"')+1)).substring(0,n.indexOf('"'))).indexOf("?")<0&&(i="?"),k.get(o).video=k.get(o).video.replace(n,n+=i+"autoplay=1&mute=1")):!r&&k.get(o).video.indexOf(!1)&&(-1<k.get(o).video.indexOf("&autoplay=1")&&(k.get(o).video=k.get(o).video.replace("&autoplay=1","")),-1<k.get(o).video.indexOf("?autoplay=1"))&&(k.get(o).video=k.get(o).video.replace("?autoplay=1","")),w.events.focus(!0),w.selection.restore(),w.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video fr-deletable">'.concat(k.get(o).video,"</span>"),!1,w.opts.videoSplitHTML),w.popups.hide("filesManager.insert"),(i=w.$el.find(".fr-jiv")).removeClass("fr-jiv"),i.toggleClass("fr-rv",w.opts.videoResponsive),n=i,r=w.opts.videoDefaultDisplay,y=w.opts.videoDefaultAlign,!w.opts.htmlUntouched&&w.opts.useClasses?(n.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"),n.addClass("fr-fv".concat(y[0]," fr-dv").concat(r[0]))):"inline"==r?(n.css({display:"inline-block"}),"center"==y?n.css({"float":"none"}):"left"==y?n.css({"float":"left"}):n.css({"float":"right"})):(n.css({display:"block",clear:"both"}),"left"==y?n.css({textAlign:"left"}):"right"==y?n.css({textAlign:"right"}):n.css({textAlign:"center"})),i.toggleClass("fr-draggable",w.opts.videoMove),w.events.trigger("video.inserted",[i]),Se.call(i)):(m=k.get(o).link,y=k.get(o).sanitize,v=k.get(o).data,h=k.get(o).$existing_img,b=k.get(o).response,w.edit.off(),y&&(m=w.helpers.sanitizeURL(m)),function(){var e,t;if(h){w.undo.canDo()||h.find("video").hasClass("fr-uploading")||w.undo.saveStep();for(var n=h.find("video").data("fr-old-src"),i=h.data("fr-replaced"),a=(h.data("fr-replaced",!1),w.$wp?((e=h.clone(!0)).find("video").removeData("fr-old-src").removeClass("fr-uploading"),e.find("video").off("canplay"),n&&h.find("video").attr("src",n),h.replaceWith(e)):e=h,e.find("video").get(0).attributes),r=0;r<a.length;r++){var s=a[r];0===s.nodeName.indexOf("data-")&&e.find("video").removeAttr(s.nodeName)}if(void 0!==v)for(t in v)v.hasOwnProperty(t)&&"link"!=t&&e.find("video").attr("data-".concat(t),v[t]);e.find("video").on("canplay",Se),e.find("video").attr("src",m),w.edit.on(),Te(),w.undo.saveStep(),w.$el.blur(),w.events.trigger(i?"video.replaced":"video.inserted",[e,b])}else e=function(e,t,n,i,a){var r,s="";if(t&&void 0!==t)for(r in t)t.hasOwnProperty(r)&&"link"!=r&&(s+=" data-".concat(r,'="').concat(t[r],'"'));var o=w.opts.videoDefaultWidth;o&&"auto"!=o&&(o="".concat(o,"px"));{var l;a=Ne(i)?M(document.createElement("span")).attr("contenteditable","false").attr("draggable","true").attr("class","fr-video fr-dv"+w.opts.videoDefaultDisplay[0]+("center"!=w.opts.videoDefaultAlign?" fr-fv"+w.opts.videoDefaultAlign[0]:"")).html('<audio src="'+e+'" '+s+" controls>"+w.language.translate("Your browser does not support HTML5 video.")+"</audio>"):(l="",document.getElementById("fr-file-autoplay-button-"+a).checked&&(l="autoplay"),M(document.createElement("span")).attr("contenteditable","false").attr("draggable","true").attr("class","fr-video fr-dv"+w.opts.videoDefaultDisplay[0]+("center"!=w.opts.videoDefaultAlign?" fr-fv"+w.opts.videoDefaultAlign[0]:"")).html('<video src="'+e+'" '+s+(o?' style="width: '+o+';" ':"")+l+"  controls>"+w.language.translate("Your browser does not support HTML5 video.")+"</video>"))}a.toggleClass("fr-draggable",w.opts.videoMove),w.edit.on(),w.events.focus(!0),w.selection.restore(),w.undo.saveStep(),w.opts.videoSplitHTML?w.markers.split():w.markers.insert();w.html.wrap();e=w.$el.find(".fr-marker");w.node.isLastSibling(e)&&e.parent().hasClass("fr-deletable")&&e.insertAfter(e.parent());e.replaceWith(a);o="";o=Ne(i)?"audio":"video",a.find(o).get(0).readyState>a.find(o).get(0).HAVE_FUTURE_DATA||w.helpers.isIOS()?n.call(a.find(o).get(0)):(a.find(o).on("canplaythrough load",n),a.find(o).on("error",n));return a}(m,v,Se,B(k.get(o)),o),Te(),w.undo.saveStep(),w.events.trigger("video.inserted",[e,b])}())),w.popups.hide("filesManager.insert"),A["delete"](o);var f,p,g,u,m,v,h,b,y,i=w.popups.get("filesManager.insert");i.find("input.fr-insert-attr.fr-checkbox-file-".concat(o))[0].checked=!1,i.find(".fr-file-"+o).get(0).classList.add("fr-unchecked"),_(),document.getElementById("fr-file-autoplay-button-"+o)&&(document.getElementById("fr-file-autoplay-button-"+o).checked=!1),C=C.filter(function(e){return e!=o})}function Ue(e,t){try{var n;return!1===w.events.trigger("filesManager.uploaded",[e],!0)?(w.edit.on(),!1):(n=JSON.parse(e)).link?n:(L(V,e,null,t),!1)}catch(i){return L(I,e,null,t),!1}}function ze(e,t){try{var n=M(e).find("Location").text(),i=M(e).find("Key").text();return!1===w.events.trigger("filesManager.uploadedToS3",[n,i,e],!0)?(w.edit.on(),!1):n}catch(a){return L(I,e,null,t),!1}}function Oe(e,t,n,i){if(-1<q.indexOf(B(e))||!B(e))return L(X,null,null,i),!1;if(!1===w.events.trigger("filesManager.beforeUpload",[t]))return!1;if(!(null!==w.opts.filesManagerUploadURL&&w.opts.filesManagerUploadURL!=P||w.opts.filesManagerUploadToS3||w.opts.filesManagerUploadToAzure))return r=i,s=e,(l=new FileReader).onload=function(){var e;l.result;if(l.result.indexOf("svg+xml")<0){for(var t,n=atob(l.result.split(",")[1]),i=[],a=0;a<n.length;a++)i.push(n.charCodeAt(a));e=window.URL.createObjectURL(new Blob([new Uint8Array(i)],{type:B(s)})),D(B(s))&&(t={link:e,sanitize:!1,data:null,$existing_img:o,response:null,type:B(s)},k.set(r,t)),U(B(s))&&(t={link:e,text:s.name,response:null,type:B(s)},k.set(r,t)),(Fe(B(s))||Ne(B(s)))&&(t={link:e,sanitize:!1,data:null,$existing_img:o,type:B(s)},k.set(r,t))}},l.readAsDataURL(s),!1;var r,s,o,l,a,d;if(!D(B(e))||e.name||(e.name=(new Date).getTime()+"."+(B(e)||"image/jpeg").replace(/image\//g,"")),e.size>w.opts.filesManagerMaxSize)return L(G,null,null,i),!1;if(w.opts.filesManagerAllowedTypes.indexOf("*")<0&&w.opts.filesManagerAllowedTypes.indexOf(B(e))<0)return L(X,null,null,i),!1;if(t=i,isNaN(t)||(w.popups.get("filesManager.insert").find(".fr-file-item-right-"+t).get(0).innerHTML='<div class=\'fr-file-item-action-buttons\' >\n    <button type="button" id="fr-file-cancel-upload-button-'.concat(t,'" class="fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \n    fr-file-button-').concat(t,' fr-file-cancel-upload-button" data-cmd="cancelUpload" data-title="Cancel" data-param1="').concat(t,'" role="button">\n    <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "-2 3 30 30" xlmns = "http://w3.org/200/svg"><path d = \'M13.4,12l5.6,5.6L17.6,19L12,13.4L6.4,19L5,17.6l5.6-5.6L5,6.4L6.4,5l5.6,5.6L17.6,5L19,6.4L13.4,12z\'></path></svg>\n    </button>\n\n    <button type="button" id="fr-upload-delete-button-').concat(t,'" class="fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \n    fr-file-button-').concat(t,' fr-upload-delete-button" data-cmd="deleteUpload" data-title="Delete" data-param1="').concat(t,'" role="button">\n    <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "-2 3 30 30" xlmns = "http://w3.org/200/svg"><path d = \'M15,10v8H9v-8H15 M14,4H9.9l-1,1H6v2h12V5h-3L14,4z M17,8H7v10c0,1.1,0.9,2,2,2h6c1.1,0,2-0.9,2-2V8z\'></path></svg>\n    </button>\n\n    <div class=\'progress-circle p0 fr-file-progress-circle-').concat(t,"'>\n                  <span class='fr-file-upload-percent-").concat(t," fr-file-upload-percent'>0%</span>\n                  <div class='left-half-clipper'>\n                    <div class='first50-bar'></div>\n                    <div class='value-bar'></div>\n                  </div>\n                </div>\n            </div>"),b.set(t,0)),a=w.drag_support.formdata?w.drag_support.formdata?new FormData:null:a){if(!1!==w.opts.filesManagerUploadToS3)for(d in a.append("key",w.opts.filesManagerUploadToS3.keyStart+(new Date).getTime()+"-"+(e.name||"untitled")),a.append("success_action_status","201"),a.append("X-Requested-With","xhr"),a.append("Content-Type",B(e)),w.opts.filesManagerUploadToS3.params)w.opts.filesManagerUploadToS3.params.hasOwnProperty(d)&&a.append(d,w.opts.filesManagerUploadToS3.params[d]);for(d in w.opts.filesManagerUploadParams)w.opts.filesManagerUploadParams.hasOwnProperty(d)&&a.append(d,w.opts.filesManagerUploadParams[d]);a.append(w.opts.filesManagerUploadParam,e,e.name);var c,t=w.opts.filesManagerUploadURL,f=(w.opts.filesManagerUploadToS3&&(t=w.opts.filesManagerUploadToS3.uploadURL||"https://".concat(w.opts.filesManagerUploadToS3.region,".amazonaws.com/").concat(w.opts.filesManagerUploadToS3.bucket)),w.opts.filesManagerUploadToAzure&&(t=w.opts.filesManagerUploadToAzure.uploadURL?"".concat(w.opts.filesManagerUploadToAzure.uploadURL,"/").concat(e.name):encodeURI("https://".concat(w.opts.filesManagerUploadToAzure.account,".blob.core.windows.net/").concat(w.opts.filesManagerUploadToAzure.container,"/").concat(e.name)),c=t,w.opts.filesManagerUploadToAzure.SASToken&&(t+=w.opts.filesManagerUploadToAzure.SASToken),w.opts.filesManagerUploadMethod="PUT"),w.core.getXHR(t,w.opts.filesManagerUploadMethod));if(w.opts.filesManagerUploadToAzure){var p,g,u,m,t=(new Date).toUTCString();for(d in!w.opts.filesManagerUploadToAzure.SASToken&&w.opts.filesManagerUploadToAzure.accessKey&&(p=w.opts.filesManagerUploadToAzure.account,u=w.opts.filesManagerUploadToAzure.container,w.opts.filesManagerUploadToAzure.uploadURL&&(u=(g=w.opts.filesManagerUploadToAzure.uploadURL.split("/")).pop(),p=g.pop().split(".")[0]),g="x-ms-blob-type:BlockBlob\nx-ms-date:".concat(t,"\nx-ms-version:2019-07-07"),u=encodeURI("/"+p+"/"+u+"/"+e.name),g=w.opts.filesManagerUploadMethod+"\n\n\n"+e.size+"\n\n"+B(e)+"\n\n\n\n\n\n\n"+g+"\n"+u,u=w.cryptoJSPlugin.cryptoJS.HmacSHA256(g,w.cryptoJSPlugin.cryptoJS.enc.Base64.parse(w.opts.filesManagerUploadToAzure.accessKey)).toString(w.cryptoJSPlugin.cryptoJS.enc.Base64),m=u,f.setRequestHeader("Authorization","SharedKey "+p+":"+u)),f.setRequestHeader("x-ms-version","2019-07-07"),f.setRequestHeader("x-ms-date",t),f.setRequestHeader("Content-Type",B(e)),f.setRequestHeader("x-ms-blob-type","BlockBlob"),w.opts.filesManagerUploadParams)w.opts.filesManagerUploadParams.hasOwnProperty(d)&&f.setRequestHeader(d,w.opts.filesManagerUploadParams[d]);for(d in w.opts.filesManagerUploadToAzure.params)w.opts.filesManagerUploadToAzure.params.hasOwnProperty(d)&&f.setRequestHeader(d,w.opts.filesManagerUploadToAzure.params[d])}f.onload=function(){U(B(e))?function(e,t,n,i,a){var r,s,o,l,d=this.status,c=this.response,f=this.responseXML,p=this.responseText;try{if(w.opts.filesManagerUploadToS3||w.opts.filesManagerUploadToAzure)if(201===d){if(w.opts.filesManagerUploadToAzure){if(!1===w.events.trigger("filesManager.uploadedToAzure",[this.responseURL,a,c],!0))return w.edit.on(),!1;o=i}else o=ze(f,t);o&&(l={link:o,text:e,response:c,type:n},k.set(t,l))}else L(I,c||f,null,t);else 200<=d&&d<300?(r=Ue(p,t))&&(s={link:r.link,text:e,response:c,type:n,data:r},k.set(t,s)):L(W,c||p,null,t)}catch(g){L(I,c||p,null,t)}}.call(f,e.name,i,B(e),c,m):function(e,t,n,i,a){var r,s,o,l,d=this.status,c=this.response,f=this.responseXML,p=this.responseText;try{if(w.opts.filesManagerUploadToS3||w.opts.filesManagerUploadToAzure)if(201==d){if(w.opts.filesManagerUploadToAzure){if(!1===w.events.trigger("filesManager.uploadedToAzure",[this.responseURL,a,c],!0))return w.edit.on(),!1;o=i}else o=ze(f,t);o&&(l={link:o,sanitize:!1,data:[],$existing_img:e,response:c||f,type:n},k.set(t,l))}else L(I,c||f,e,t);else 200<=d&&d<300?(r=Ue(p,t))&&(s={link:r.link,sanitize:!1,data:r,$existing_img:e,response:c||f,type:n},k.set(t,s)):L(W,c||p,e,t)}catch(g){L(I,c||p,e,t)}}.call(f,v,i,B(e),c,m),y.has(i)||Ie(100,i,!0)},f.onerror=function(){L(I,this.response||this.responseText||this.responseXML,null,i)},f.upload.onprogress=function(e){var t;t=i,(e=e).lengthComputable&&Ie(e.loaded/e.total*100|0,t,!1)},f.onabort=function(e){L(j,e,v,i)},f.send(w.opts.filesManagerUploadToAzure?e:a),h.set(i,f)}}function $e(l){w.events.$on(l,"click",".fr-upload-progress-layer",function(e){if(w.helpers.isMobile())return e.stopPropagation(),!1},!0),w.events.$on(l,"dragover dragenter",".fr-upload-progress-layer",function(e){e.preventDefault();for(var t=0;t<e.originalEvent.dataTransfer.types.length;t++)"Files"==e.originalEvent.dataTransfer.types[t]&&(e.originalEvent.dataTransfer.dropEffect="none");return!1},!0),w.events.$on(l,"dragleave dragend",".fr-upload-progress-layer",function(e){return e.preventDefault(),!1},!0),w.events.$on(l,"dragover dragenter",".fr-files-upload-layer",function(e){return M(this).addClass("fr-drop"),(w.browser.msie||w.browser.edge)&&e.preventDefault(),!1},!0),w.events.$on(l,"dragleave dragend",".fr-files-upload-layer",function(e){return M(this).removeClass("fr-drop"),(w.browser.msie||w.browser.edge)&&e.preventDefault(),!1},!0),w.events.$on(l,"click",".fr-insert-checkbox",function(e){if(this.classList.contains("fr-checkbox-disabled"))this.children.target.disabled=!0,this.children.target.checked=!1;else{for(var t=parseInt(this.id.split("-").pop()),t=(A.set(t,this.children.target.checked),l.find('.fr-command[data-cmd="insertAll"]')),n=l.find('.fr-command[data-cmd="deleteAll"]'),i=l.find('input.fr-file-insert-check[type="checkbox"]'),a=i.length,r=!0,s=0;s<a;s++)1==i[s].checked&&(r=!1);r?t.addClass("fr-disabled"):t.removeClass("fr-disabled"),r?n.addClass("fr-disabled"):n.removeClass("fr-disabled"),this.children.target.checked?(l.find(".fr-file-"+this.id.split("-").pop()).get(0).setAttribute("draggable","true"),l.find(".fr-file-"+this.id.split("-").pop()).get(0).classList.remove("fr-unchecked")):(this.id.split("-").pop(),l.find(".fr-file-"+this.id.split("-").pop()).get(0).setAttribute("draggable","false"),l.find(".fr-file-"+this.id.split("-").pop()).get(0).classList.add("fr-unchecked"))}}),w.events.$on(l,"click",".fr-file-insert-button",function(e){this.classList.contains("fr-disabled")||De(parseInt(this.id.split("-").pop()))}),w.events.$on(l,"click",".fr-file-autoplay-button",function(e){this.parentNode.classList.contains("fr-checkbox-disabled")?(this.disabled=!0,this.checked=!1):Pe(parseInt(this.id.split("-").pop()))}),w.events.$on(l,"click",".fr-file-edit-button",function(e){var t=parseInt(this.id.split("-").pop());l.find(".fr-file-edit-button-".concat(t)).hasClass("fr-disabled")||Be(t)}),w.events.$on(l,"click",".fr-file-view-button",function(e){var t=parseInt(this.id.split("-").pop());if(!l.find(".fr-file-view-button-".concat(t)).hasClass("fr-disabled"))if(He(B(k.get(t)))){var n=w.popups.get("filesManager.insert");if(0<n.find(".fr-file-view-image-"+t).length)n.find(".fr-file-view-image-"+t)[0].remove();else{for(var i=n.find(".fr-file-view"),a=0;a<i.length;a++)i.get(a).remove();var r,s,o,n=n.find(".fr-file-view-"+t);D(B(k.get(t)))?(r='<div class="fr-file-view-modal">\n              <div class="fr-file-view-modal-content">\n              <div class="fr-file-view-close">&times;</div> \n                <img src="'+k.get(t).link+"\" class ='fr-file-view-image'/>\n                </div>\n              </div>",n[0].innerHTML=r+n[0].innerHTML):Fe(B(k.get(t)))?(r=k.get(t).hasOwnProperty("video")?(r=(r=(r=k.get(t).video.substring(k.get(t).video.indexOf("src")+3)).substring(r.indexOf('"')+1)).substring(0,r.indexOf('"')),'<div class="fr-file-view-modal">\n        <div class="fr-file-view-modal-content ">\n          <div class="fr-file-view-close">&times;</div> \n          <iframe width="640" height="360" src="'.concat(r+"&autoplay=1&mute=1",'" allow="autoplay" frameborder="0" class = "fr-file-view-image"></iframe>\n        </div>\n      </div>')):'<div class="fr-file-view-modal">\n          <div class="fr-file-view-modal-content ">\n            <div class="fr-file-view-close">&times;</div> \n            <video controls src="'+k.get(t).link+"\"  class ='fr-file-view-image' autoplay></video>\n          </div>\n        </div>",n[0].innerHTML=r+n[0].innerHTML):Ne(B(k.get(t)))?(r='<div class="fr-file-view-modal">\n        <div class="fr-file-view-modal-content ">\n          <div  class="fr-file-view-close">&times;</div> \n          <audio controls="controls"  class =\'fr-file-view-image\' autoplay>\n\n          <source src="'.concat(k.get(t).link,'" type="').concat(B(k.get(t)),'" />\n\n            Your browser does not support the audio element.\n          </audio>\n        </div>\n      </div>'),n[0].innerHTML=r+n[0].innerHTML):U(B(k.get(t)))&&(r=k.get(t).link,s=k.get(t).text,r.endsWith(".pdf")||r.endsWith(".txt")?(o='<div class="fr-file-view-modal">\t\n              <div class="fr-file-view-modal-content " >\t\n              <div class="fr-file-view-close">&times;</div> \t\n              <iframe src="'.concat(r,"\" style='background-color: white;' height='50%' width='50%' title=\"").concat(s,'" class="fr-file fr-file-view-image"></iframe>\t\n            </div>\t\n            </div>'),n[0].innerHTML=o+n[0].innerHTML):0===r.indexOf("blob:")&&w.browser.msie&&window.navigator&&window.navigator.msSaveBlob?window.navigator.msSaveBlob(E.get(t),s):((o=document.createElement("a")).href=r,o.download=s,o.click()))}}else n=k.get(t).link,r=k.get(t).link,E.get(t)&&E.get(t).name?r=E.get(t).name:k.get(t).text&&(r=k.get(t).text),0===n.indexOf("blob:")&&w.browser.msie&&window.navigator&&window.navigator.msSaveBlob?window.navigator.msSaveBlob(E.get(t),r):((s=document.createElement("a")).href=n,s.download=r,s.click())}),w.events.$on(l,"click",".fr-file-delete-button",function(e){o(parseInt(this.id.split("-").pop()))}),w.events.$on(l,"click",".fr-file-cancel-upload-button",function(e){var t,n=parseInt(this.id.split("-").pop());n=n,(t=w.popups.get("filesManager.insert")).find(".fr-file-item-right-"+n).get(0).innerHTML=Ce(n),h.get(n).abort(),Le(n,100,!0),t.find(".fr-checkbox-file-"+n).get(0).disabled=!0}),w.events.$on(l,"click",".fr-upload-delete-button",function(e){var t=parseInt(this.id.split("-").pop());t=t,0!=h.get(t).readyState&&(h.get(t).abort(),Le(t,100,!0),h["delete"](t)),o(t)}),w.events.$on(l,"click",".fr-file-view-close",function(e){l.find(".fr-file-view-modal").get(0).outerHTML=""}),w.events.$on(l,"click",".fr-plugins-enable",function(e){K.forEach(function(e){w.opts.pluginsEnabled.indexOf(e)<0&&w.opts.pluginsEnabled.push(e)});var t,n=dt.PLUGINS;for(t in n)w[t]||dt.PLUGINS[t]&&w.opts.pluginsEnabled.indexOf(t)<0||(w[t]=new n[t](w),w[t]._init&&w[t]._init());w.popups.get("filesManager.insert").get(0).outerHTML="",Ke(),J(!0)}),w.events.$on(l,"click",".fr-plugins-cancel",function(e){w.popups.hide("filesManager.insert")}),w.events.$on(l,"drop",".fr-upload-progress",function(e){e.preventDefault(),e.stopPropagation()}),w.events.$on(l,"drop",".fr-files-upload-layer",function(e){e.preventDefault(),e.stopPropagation(),M(this).removeClass("fr-drop");var t=e.originalEvent.dataTransfer;if(t&&t.files){for(var n=l.data("instance")||w,i=(n.events.disableBlur(),[]),a=0;a<t.files.length;a++){var r=f;E.set(r,t.files[a]),T(r),A.set(r,!1),i.push(r),f++}for(var s=0;s<i.length;s++)n.filesManager.upload(E.get(i[s]),t.files,v,i[s]);n.events.enableBlur()}},!0),w.helpers.isIOS()&&w.events.$on(l,"touchstart",'.fr-files-upload-layer input[type="file"]',function(){M(this).trigger("click")},!0),w.events.$on(l,"change",'.fr-files-upload-layer input[type="file"]',function(){if(this.files){var e=l.data("instance")||w,t=(e.events.disableBlur(),l.find("input:focus").blur(),e.events.enableBlur(),[]);if("undefined"!=typeof this.files&&0<this.files.length){for(var n=0;n<this.files.length;n++){var i=f;E.set(i,this.files[n]),T(i),A.set(i,!1),++f,t.push(i)}for(var a=0;a<t.length;a++)e.filesManager.upload(E.get(t[a]),this.files,v,t[a])}}M(this).val("")},!0)}function Pe(t){document.getElementById("fr-file-autoplay-button-"+t).checked?C.push(t):C=C.filter(function(e){return e!=t})}function D(e){return e&&"image"===e.split("/")[0]}function U(e){return e&&"image"!=e.split("/")[0]&&e&&"video"!=e.split("/")[0]&&e&&"audio"!=e.split("/")[0]}function Fe(e){return e&&"video"===e.split("/")[0]}function Ne(e){return e&&"audio"===e.split("/")[0]}function He(e){var t="audio/ogg",n="video/ogg";if(e==t||e==n||"image/webp"==e||"video/webm"==e){if(w.browser.msie||w.browser.edge||w.browser.safari)return;if(w.helpers.isMobile()){if(e==t||e==n)return;if(!w.helpers.isAndroid()&&!w.browser.chrome)return}}return 1}function Ke(e){var t,n,i,a,r,s,o;return e?(w.popups.onRefresh("filesManager.insert",Z),w.popups.onHide("filesManager.insert",ee),!0):(e="",w.opts.imageUpload||-1===w.opts.filesInsertButtons.indexOf("filesUpload")||w.opts.imageInsertButtons.splice(w.opts.filesInsertButtons.indexOf("filesUpload"),1),o=w.button.buildList(w.opts.filesInsertButtons),i=w.button.buildList(w.opts.filesInsertButtons2),""!==o&&(e='<div class="fr-buttons fr-tabs">'.concat(o,'<span class="fr-align-right">').concat(i,"</span></div>")),o=w.opts.filesInsertButtons.indexOf("filesUpload"),i=w.opts.filesInsertButtons.indexOf("filesByURL"),s=w.opts.filesInsertButtons.indexOf("filesEmbed"),a="",0<=o&&(t=" fr-active",a='<div class="fr-files-upload-layer'.concat(t=0<=i&&i<o?"":t,' fr-layer " id="fr-files-upload-layer-').concat(w.id,'"><div style="display:flex"><div class="fr-upload-section"><div class = \'fr-blue-decorator\'><div class = \'fr-cloud-icon\'><svg class = "fr-svg" focusable="false" width="26px" height="26px" viewBox = "0 0 24 24" xlmns = "http://w3.org/200/svg"><path d = \'M12 6.66667a4.87654 4.87654 0 0 1 4.77525 3.92342l0.29618 1.50268 1.52794 0.10578a2.57021 2.57021 0 0 1 -0.1827 5.13478H6.5a3.49774 3.49774 0 0 1 -0.3844 -6.97454l1.06682 -0.11341L7.678 9.29387A4.86024 4.86024 0 0 1 12 6.66667m0 -2A6.871 6.871 0 0 0 5.90417 8.37 5.49773 5.49773 0 0 0 6.5 19.33333H18.41667a4.57019 4.57019 0 0 0 0.32083 -9.13A6.86567 6.86567 0 0 0 12 4.66667Zm0.99976 7.2469h1.91406L11.99976 9 9.08618 11.91357h1.91358v3H11V16h2V14h-0.00024Z\'></path></svg></div>Drag & Drop One or More Files<br><div class="fr-decorated"><span> OR </span></div> Click Browse Files </div> </div><div class="fr-form"><input type="file" accept="').concat(w.opts.filesManagerAllowedTypes.join(",").toLowerCase(),'" tabIndex="-1" aria - labelledby="fr-files-upload-layer-').concat(w.id,'"role="button" multiple></div> </div></div>')),r="",0<=s&&(t=" fr-active",r='<div class="fr-files-embed-layer fr-layer'.concat(t=o<s&&0<=o||i<s&&0<=i?"":t,'" id="fr-files-embed-layer-').concat(w.id,'"><div class="fr-input-line padding-top-15"><textarea data-gramm_editor="false" style=\'height:60px\' id="fr-files-embed-layer-text').concat(w.id,'" type="text" placeholder="').concat(w.language.translate("Embedded Code"),'" tabIndex="1" aria-required="true" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="insertEmbed" tabIndex="2" role="button">').concat(w.language.translate("Insert"),"</button></div></div>")),s="",0<=i&&(t=" fr-active",s='<div class="fr-files-by-url-layer'.concat(t=0<=o&&o<i?"":t,' fr-layer" id="fr-files-by-url-layer-').concat(w.id,'"><div class="fr-input-line fr-by-url-padding"><input id="fr-files-by-url-layer-text-').concat(w.id,'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="filesInsertByURL" tabIndex="2" role="button">').concat(w.language.translate("Add"),"</button></div></div>")),o="",o="<div class = ' fr-margin-16 fr-upload-progress' id=\"fr-upload-progress-layer-".concat(w.id,"\" ><div  class='fr-progress-bar-style'><div class='fr-progress-bar fr-none'></div></div><div id='filesList' class = 'fr-upload-progress-layer fr-layer'></div></div>"),1<=w.opts.imageInsertButtons.length&&(n=w.popups.create("filesManager.insert",{buttons:e,upload_layer:a,by_url_layer:s,embed_layer:r,upload_progress_layer:o,progress_bar:'<div class="fr-files-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="filesDismissError" tabIndex="2" role="button">OK</button></div></div>'})),w.$wp&&w.events.$on(w.$wp,"scroll",function(){v&&w.popups.isVisible("filesManager.insert")&&replace()}),$e(n),w.popups.setPopupDimensions(n),n)}function Ye(e){var t,e=e.split("/").pop();return e.split(".").length<2?e+"-"+(t=new Date).getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear():e}function Ve(){v&&w.popups.get("image.alt").find("input").val(v.attr("alt")||"").trigger("change")}function We(){w.popups.get("image.alt")||Ge();g(),w.popups.refresh("image.alt"),w.popups.setContainer("image.alt",w.$sc);var e=O(),t=(e=$()?e.find(".fr-img-wrap"):e).offset().left+e.outerWidth()/2,n=e.offset().top+e.outerHeight();w.popups.show("image.alt",t,n,e.outerHeight(),!0)}function Ge(e){var t;return e?(w.popups.onRefresh("image.alt",Ve),!0):(e="",e='<div class="fr-buttons fr-tabs">'.concat(w.button.buildList(w.opts.imageAltButtons),"</div>"),t="",t='<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'.concat(w.id,'"><div class="fr-input-line"><input id="fr-image-alt-layer-text-').concat(w.id,'" type="text" placeholder="').concat(w.language.translate("Alternative Text"),'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">').concat(w.language.translate("Update"),"</button></div></div>"),e=w.popups.create("image.alt",{buttons:e,alt_layer:t}),w.$wp&&w.events.$on(w.$wp,"scroll.image-alt",function(){v&&w.popups.isVisible("image.alt")&&We()}),e)}function Xe(){var e,t=w.popups.get("image.size");v&&($()?((e=v.parent()).get(0).style.width||(e=v.parent().parent()),t.find('input[name="width"]').val(e.get(0).style.width).trigger("change"),t.find('input[name="height"]').val(e.get(0).style.height)):(t.find('input[name="width"]').val(v.get(0).style.width).trigger("change"),t.find('input[name="height"]').val(v.get(0).style.height))).trigger("change")}function je(){w.popups.get("image.size")||qe();g(),w.popups.refresh("image.size"),w.popups.setContainer("image.size",w.$sc);var e=O(),t=(e=$()?e.find(".fr-img-wrap"):e).offset().left+e.outerWidth()/2,n=e.offset().top+e.outerHeight();w.popups.show("image.size",t,n,e.outerHeight(),!0)}function qe(e){var t;return e?(w.popups.onRefresh("image.size",Xe),!0):(e="",e='<div class="fr-buttons fr-tabs">'.concat(w.button.buildList(w.opts.imageSizeButtons),"</div>"),t="",t='<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'.concat(w.id,'"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-\'').concat(w.id,'" type="text" name="width" placeholder="').concat(w.language.translate("Width"),'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height').concat(w.id,'" type="text" name="height" placeholder="').concat(w.language.translate("Height"),'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">').concat(w.language.translate("Update"),"</button></div></div>"),e=w.popups.create("image.size",{buttons:e,size_layer:t}),w.$wp&&w.events.$on(w.$wp,"scroll.image-size",function(){v&&w.popups.isVisible("image.size")&&je()}),e)}function Ze(e,t,n,i){return e.pageX=t,ae.call(this,e),e.pageX=e.pageX+n*Math.floor(Math.pow(1.1,i)),re.call(this,e),se.call(this,e),++i}function Je(e){(e=e||O())&&!1!==w.events.trigger("image.beforeRemove",[e])&&(w.popups.hideAll(),z(!0),w.undo.canDo()||w.undo.saveStep(),e.get(0)==w.el?e.removeAttr("src"):((e.get(0).parentNode&&"A"==e.get(0).parentNode.tagName?(w.selection.setBefore(e.get(0).parentNode)||w.selection.setAfter(e.get(0).parentNode)||e.parent().after(dt.MARKERS),M(e.get(0).parentNode)):(w.selection.setBefore(e.get(0))||w.selection.setAfter(e.get(0))||e.after(dt.MARKERS),e)).remove(),w.html.fillEmptyBlocks(),w.selection.restore()),w.undo.saveStep())}function e(e){var t,n=e.which;return!v||n!=dt.KEYCODE.BACKSPACE&&n!=dt.KEYCODE.DELETE?v&&n==dt.KEYCODE.ESC?(t=v,z(!0),w.selection.setAfter(t.get(0)),w.selection.restore(),e.preventDefault(),!1):!v||n!=dt.KEYCODE.ARROW_LEFT&&n!=dt.KEYCODE.ARROW_RIGHT?v&&n===dt.KEYCODE.TAB?(e.preventDefault(),e.stopPropagation(),z(!0),!1):v&&n!=dt.KEYCODE.F10&&!w.keys.isBrowserAction(e)?(e.preventDefault(),e.stopPropagation(),!1):void 0:(t=v.get(0),z(!0),n==dt.KEYCODE.ARROW_LEFT?w.selection.setBefore(t):w.selection.setAfter(t),w.selection.restore(),e.preventDefault(),!1):(e.preventDefault(),e.stopPropagation(),Je(),!1)}function Qe(e){var t;if(e&&"IMG"==e.tagName)w.node.hasClass(e,"fr-uploading")||w.node.hasClass(e,"fr-error")?null!=(t=e.parentNode)&&t.removeChild(e):w.node.hasClass(e,"fr-draggable")&&e.classList.remove("fr-draggable"),e.parentNode&&e.parentNode.parentNode&&w.node.hasClass(e.parentNode.parentNode,"fr-img-caption")&&((t=e.parentNode.parentNode).removeAttribute("contenteditable"),t.removeAttribute("draggable"),t.classList.remove("fr-draggable"),t=e.nextSibling)&&t.removeAttribute("contenteditable");else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var n=e.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"),i=0;i<n.length;i++)Qe(n[i])}function et(e){var e=e.target.result,t=w.opts.imageDefaultWidth,e=(t&&"auto"!=t&&(t+=w.opts.imageResizeWithPercent?"%":"px"),w.undo.saveStep(),w.html.insert('<img data-fr-image-pasted="true" src="'.concat(e,'"').concat(t?' style="width: '.concat(t,';"'):"",">")),w.$el.find('img[data-fr-image-pasted="true"]'));e&&ot(e,w.opts.imageDefaultDisplay,w.opts.imageDefaultAlign),w.events.trigger("paste.after")}function tt(e,t){var n,i,a=new FileReader;a.onload=(n=t,(i=w.opts.imageDefaultWidth)&&"auto"!=i&&(i+=w.opts.imageResizeWithPercent?"%":"px"),w.html.insert('<img data-fr-image-pasted="true" src="'.concat(n,'"').concat(i?' style="width: '.concat(i,';"'):"",">")),(n=w.$el.find('img[data-fr-image-pasted="true"]'))&&ot(n,w.opts.imageDefaultDisplay,w.opts.imageDefaultAlign),void w.events.trigger("paste.after")),a.readAsDataURL(e,t)}function nt(e,t){var n=t||e&&e.clipboardData;if(n&&n.items){var t=(n||window.clipboardData).getData("text/html")||"",e=(new DOMParser).parseFromString(t,"text/html").querySelector("img"),i=/caret-color:\s*rgb\(/.test(t)||/direction:\s*ltr.*margin-top:\s*0in/.test(t)||/width:\s*[\d.]+in/.test(t);if(t.match('content="Microsoft OneNote')||i)return!0;if(e&&!w.opts.imageUploadURL){if(!e)return!1;var t=e.src,a=null;if(n.types&&-1!=[].indexOf.call(n.types,"text/rtf")||n.getData("text/rtf"))a=n.items[0].getAsFile();else for(var r=0;r<n.items.length;r++)if(a=n.items[r].getAsFile()){dt.IMAGE_TYPE=a.type;break}return a?(tt(a,t),!1):void 0}var s=null;if(n.types&&-1!=[].indexOf.call(n.types,"text/rtf")||n.getData("text/rtf"))s=n.items[0].getAsFile();else for(var o=0;o<n.items.length&&!(s=n.items[o].getAsFile());o++);return s?(i=s,(e=new FileReader).onload=et,e.readAsDataURL(i),!1):void 0}}function it(e){return e=e.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function z(e){v&&(at||!0===e)&&(w.toolbar.enable(),d&&d.removeClass("fr-active"),w.popups.hide("image.edit"),st(),a=v=null,c)&&c.hide()}var at=!(s[j]="File upload cancelled");function rt(){at=!0}function st(){at=!1}function ot(e,t,n){!w.opts.htmlUntouched&&w.opts.useClasses?(M(e).removeClass("fr-fil fr-fir fr-dib fr-dii"),n&&M(e).addClass("fr-fi".concat(n[0])),t&&M(e).addClass("fr-di".concat(t[0]))):"inline"==t?(e.css({display:"inline-block",verticalAlign:"bottom",margin:w.opts.imageDefaultMargin}),"center"==n?e.css({"float":"none",marginBottom:"",marginTop:"",maxWidth:"calc(100% - ".concat(2*w.opts.imageDefaultMargin,"px)"),textAlign:"center"}):"left"==n?e.css({"float":"left",marginLeft:0,maxWidth:"calc(100% - ".concat(w.opts.imageDefaultMargin,"px)"),textAlign:"left"}):e.css({"float":"right",marginRight:0,maxWidth:"calc(100% - ".concat(w.opts.imageDefaultMargin,"px)"),textAlign:"right"})):"block"==t&&(e.css({display:"block","float":"none",verticalAlign:"top",margin:"".concat(w.opts.imageDefaultMargin,"px auto"),textAlign:"center"}),"left"==n?e.css({marginLeft:0,textAlign:"left"}):"right"==n&&e.css({marginRight:0,textAlign:"right"}))}function lt(){return v}function O(){return $()?v.parents(".fr-img-caption").first():v}function $(){return!!v&&0<v.parents(".fr-img-caption").length}return{_init:function(){var i;w.events.$on(w.$el,w._mousedown,"IMG"==w.el.tagName?null:'img:not([contenteditable="false"])',function(e){if("false"==M(this).parents("contenteditable").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable"))return!0;w.helpers.isMobile()||w.selection.clear(),n=!0,w.popups.areVisible()&&w.events.disableBlur(),w.browser.msie&&(w.events.disableBlur(),w.$el.attr("contenteditable",!1)),w.draggable||"touchstart"==e.type||e.preventDefault(),e.stopPropagation()}),w.events.$on(w.$el,w._mousedown,".fr-img-caption .fr-inner",function(e){w.core.hasFocus()||w.events.focus(),e.stopPropagation()}),w.events.$on(w.$el,"paste",".fr-img-caption .fr-inner",function(e){!0===w.opts.toolbarInline&&(w.toolbar.hide(),e.stopPropagation())}),w.events.$on(w.$el,w._mouseup,"IMG"==w.el.tagName?null:'img:not([contenteditable="false"])',function(e){if("false"==M(this).parents("contenteditable").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable"))return!0;n&&(n=!1,e.stopPropagation(),w.browser.msie)&&(w.$el.attr("contenteditable",!0),w.events.enableBlur())}),w.events.on("keyup",function(e){var t;e.shiftKey&&""===w.selection.text().replace(/\n/g,"")&&w.keys.isArrow(e.which)&&(e=w.selection.element(),t=w.selection.endElement(),e&&"IMG"==e.tagName?R(M(e)):t&&"IMG"==t.tagName&&R(M(t)))},!0),w.events.on("window.mousedown",rt),w.events.on("window.touchmove",st),w.events.on("mouseup window.mouseup",function(){if(v)return z(),!1;st()}),w.events.on("commands.mousedown",function(e){0<e.parents(".fr-toolbar").length&&z()}),w.events.on("image.resizeEnd",function(){w.opts.iframe&&w.size.syncIframe()}),w.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",function(){z(!(n=!1))}),w.events.on("modals.hide",function(){v&&w.selection.clear()}),w.events.on("image.resizeEnd",function(){w.win.getSelection&&R(v)}),w.opts.imageAddNewLine&&w.events.on("image.inserted",function(e){var t=e.get(0);for(t.nextSibling&&"BR"===t.nextSibling.tagName&&(t=t.nextSibling);t&&!w.node.isElement(t);)t=w.node.isLastSibling(t)?t.parentNode:null;w.node.isElement(t)&&(w.opts.enter===dt.ENTER_BR?e.after("<br>"):M(w.node.blockParent(e.get(0))).after("<".concat(w.html.defaultTag(),"><br></").concat(w.html.defaultTag(),">")))}),"IMG"==w.el.tagName&&w.$el.addClass("fr-view"),w.helpers.isMobile()&&(w.events.$on(w.$el,"touchstart","IMG"==w.el.tagName?null:'img:not([contenteditable="false"])',function(){ye=!1}),w.events.$on(w.$el,"touchmove",function(){ye=!0})),w.opts.pluginsEnabled.includes("filestack")&&w.events.on("filestack.pluginsEnabled",function(){Ke()}),w.$wp?(w.events.on("window.keydown keydown",e,!0),w.events.on("keyup",function(e){if(v&&e.which==dt.KEYCODE.ENTER)return!1},!0),w.events.$on(w.$el,"keydown",function(){var e=w.selection.element();(e.nodeType===Node.TEXT_NODE||"BR"==e.tagName&&w.node.isLastSibling(e))&&(e=e.parentNode),w.node.hasClass(e,"fr-inner")||(w.node.hasClass(e,"fr-img-caption")||(e=M(e).parents(".fr-img-caption").get(0)),w.node.hasClass(e,"fr-img-caption")&&(w.opts.trackChangesEnabled||M(e).after(dt.INVISIBLE_SPACE+dt.MARKERS),w.selection.restore()))})):w.events.$on(w.$win,"keydown",e),w.events.on("toolbar.esc",function(){var e;if(v)return w.$wp?(w.events.disableBlur(),w.events.focus()):(e=v,z(!0),w.selection.setAfter(e.get(0)),w.selection.restore()),!1},!0),w.events.on("toolbar.focusEditor",function(){if(v)return!1},!0),w.events.on("window.cut window.copy",function(e){var t;v&&w.popups.isVisible("image.edit")&&!w.popups.get("image.edit").find(":focus").length&&(t=O(),$()?(t.before(dt.START_MARKER),t.after(dt.END_MARKER),w.selection.restore(),w.paste.saveCopiedText(t.get(0).outerHTML,t.text())):w.paste.saveCopiedText(v.get(0).outerHTML,v.attr("alt")),"copy"==e.type?setTimeout(function(){R(v)}):(z(!0),w.undo.saveStep(),setTimeout(function(){w.undo.saveStep()},0)))},!0),w.browser.msie&&w.events.on("keydown",function(e){if(!w.selection.isCollapsed()||!v)return!0;var t=e.which;t==dt.KEYCODE.C&&w.keys.ctrlKey(e)?w.events.trigger("window.copy"):t==dt.KEYCODE.X&&w.keys.ctrlKey(e)&&w.events.trigger("window.cut")}),w.events.$on(M(w.o_win),"keydown",function(e){var t=e.which;if(v&&t==dt.KEYCODE.BACKSPACE)return e.preventDefault(),!1}),w.events.$on(w.$win,"keydown",function(e){e=e.which;v&&v.hasClass("fr-uploading")&&e==dt.KEYCODE.ESC&&v.trigger("abortUpload")}),w.events.on("destroy",function(){v&&v.hasClass("fr-uploading")&&v.trigger("abortUpload")}),w.events.on("paste.before",nt),w.events.on("paste.beforeCleanup",it),w.events.on("html.processGet",Qe),w.opts.imageOutputSize&&w.events.on("html.beforeGet",function(){i=w.el.querySelectorAll("img");for(var e=0;e<i.length;e++){var t=parseFloat(M(i[e]).css("padding-left"))+parseFloat(M(i[e]).css("padding-right")),t=M(i[e]).width()-t,t=i[e].style.width||t,n=i[e].style.height||M(i[e]).height();t&&i[e].setAttribute("width","".concat(t).replace(/px/,"")),n&&i[e].setAttribute("height","".concat(n).replace(/px/,""))}}),w.opts.iframe&&w.events.on("image.loaded",w.size.syncIframe),w.events.$on(M(w.o_win),"orientationchange.image",function(){setTimeout(function(){v&&R(v)},100)}),w.$wp&&w.events.$on(w.$wp,"scroll.image-edit",function(){v&&w.popups.isVisible("image.edit")&&w.events.disableBlur()}),Ke(!0),qe(!0),Ge(!0),w.events.on("node.remove",function(e){if("IMG"==e.get(0).tagName)return Je(e),!1}),w.events.on("popups.hide.filesManager.insert",function(e){w.filesManager.minimizePopup(x)})},showInsertPopup:J,showLayer:function(e){var t,n,i,a=w.popups.get("filesManager.insert");v||w.opts.toolbarInline?v&&(n=O(),i=(n=$()?n.find(".fr-img-wrap"):n).offset().top+n.outerHeight(),n=n.offset().left):(n=(t=w.$tb.find('.fr-command[data-cmd="insertFiles"]')).offset().left,i=t.offset().top+(w.opts.toolbarBottom?10:t.outerHeight()-10)),!v&&w.opts.toolbarInline&&(i=a.offset().top-w.helpers.getPX(a.css("margin-top")),a.hasClass("fr-above"))&&(i+=a.outerHeight()),a.find(".fr-layer").removeClass("fr-active"),a.find(".fr-".concat(e,"-layer")).addClass("fr-active"),a.find(".fr-upload-progress-layer").addClass("fr-active"),w.popups.show("filesManager.insert",n,i,v?v.outerHeight():0),w.accessibility.focusPopup(a)},refreshUploadButton:function(e){var t=w.popups.get("filesManager.insert");t&&t.find(".fr-files-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},refreshByURLButton:function(e){var t=w.popups.get("filesManager.insert");t&&t.find(".fr-files-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},upload:Oe,insertByURL:function(){for(var e,a,r,s,o,t=w.popups.get("filesManager.insert").find(".fr-files-by-url-layer input"),n=t.val().trim().split(/[ ,]+/),i=[],l=0,d=0;d<n.length;d++)e=n[d],new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)&&(i[l]=n[d],l++);0==i.length?de(w.language.translate("Url entered is invalid. Please try again.")):0<t.val().trim().length&&0<i.length&&(a=[],r=[],s=f,o=i.length,i.forEach(function(e,n){var i;0==e.trim().length?f==s+--o&&_e(a,r):(g(),p(),S(w.language.translate("Loading file(s)")),(e=function(e){if(void 0===e)return e;var t=null;/^http/.test(e)||(e="https://".concat(e));if(w.helpers.isURL(e))for(var n=0;n<dt.VIDEO_PROVIDERS.length;n++){var i=dt.VIDEO_PROVIDERS[n];if(i.test_regex.test(e)&&new RegExp(w.opts.videoAllowedProviders.join("|")).test(i.provider)){t=e.replace(i.url_regex,i.url_text),t=i.html.replace(/\{url\}/,t);break}}return t}(i=e.trim()))?(E.set(s+n,e={link:i,name:i,type:"video/url",size:2,video:e}),T(s+n),g(),p(),S(w.language.translate("Loading file(s)")),k.set(s+n,e),++f==s+o&&_e(a,r)):((e=new XMLHttpRequest).onload=function(){var e;200==this.status?((e=new Blob([this.response],{type:this.response.type||""})).name=Ye(i),e.link=i,D(this.response.type)?(e.sanitize=!0,e.existing_image=v):U(this.response.type)&&(e.text=Ye(i)),a.push(e),r.push(s+n),E.set(s+n,e),T(s+n),(-1<q.indexOf(B(e))||!B(e))&&L(X,null,null,s+n)):((e=new Blob([this.response],{type:this.response.type||" "})).name=Ye(i),e.link=i,E.set(s+n,e),T(s+n),L(Y,this.response,v,s+n)),g(),p(),S(w.language.translate("Loading file(s)")),++f==s+o&&_e(a,r)},e.onerror=function(){var e={link:i,name:Ye(i),size:0,type:""},t=(L(9,this.response,v,s+n),f);E.set(t,e),T(t),g(),p(),S(w.language.translate("Loading file(s)")),++f==s+o&&_e(a,r)},e.open("GET","".concat(w.opts.imageCORSProxy,"/").concat(i),!0),e.responseType="blob",e.send()))}),t.val(""),t.blur())},insertAllFiles:function(){i=[];var e=w.popups.get("filesManager.insert");H=-1,t=null,e.find(".fr-insert-checkbox").toArray().forEach(function(e,t,n){e.children.target.checked&&(i.push(parseInt(e.id.split("-").pop())),D(k.get(parseInt(e.id.split("-").pop())).type))&&-1==H&&(H=t)}),Re(i),_()},deleteAllFiles:function(){w.popups.get("filesManager.insert").find(".fr-insert-checkbox").toArray().forEach(function(e,t,n){e.children.target.checked&&(e=parseInt(e.id.split("-").pop()),h.has(e)&&h["delete"](e),o(e))}),_()},get:lt,getEl:O,insert:De,showProgressBar:p,remove:Je,hideProgressBar:g,applyStyle:function(e,t,n){if(void 0===t&&(t=w.opts.imageStyles),void 0===n&&(n=w.opts.imageMultipleStyles),!v)return!1;var i=O();n||((n=Object.keys(t)).splice(n.indexOf(e),1),i.removeClass(n.join(" "))),"object"==ct(t[e])?(i.removeAttr("style"),i.css(t[e].style)):i.toggleClass(e),R(v)},showAltPopup:We,showSizePopup:je,setAlt:function(e){var t;v&&(t=w.popups.get("image.alt"),v.attr("alt",e||t.find("input").val()||""),t.find("input:focus").blur(),R(v))},setSize:function(e,t){var n,i;v&&(n=w.popups.get("image.size"),e=e||n.find('input[name="width"]').val()||"",t=t||n.find('input[name="height"]').val()||"",i=/^[\d]+((px)|%)*$/g,v.removeAttr("width").removeAttr("height"),e.match(i)?v.css("width",e):v.css("width",""),t.match(i)?v.css("height",t):v.css("height",""),$()&&(v.parents(".fr-img-caption").removeAttr("width").removeAttr("height"),e.match(i)?v.parents(".fr-img-caption").css("width",e):v.parents(".fr-img-caption").css("width",""),t.match(i)?v.parents(".fr-img-caption").css("height",t):v.parents(".fr-img-caption").css("height","")),n&&n.find("input:focus").blur(),R(v))},toggleCaption:function(){var e,t,n,i,a,r;v&&!$()?((e=v).parent().is("a")&&(e=v.parent()),0<(t=v.parents("ul")&&0<v.parents("ul").length?v.parents("ul"):v.parents("ol")&&0<v.parents("ol").length?v.parents("ol"):[]).length&&(i=t.find("li").length,r=v.parents("li"),n=document.createElement("li"),i-1===r.index())&&(t.append(n),n.innerHTML="&nbsp;"),e.attr("style")&&(a=-1<(i=e.attr("style").split(":")).indexOf("width")?i[i.indexOf("width")+1].replace(";",""):""),r=w.opts.imageResizeWithPercent?(-1<a.indexOf("px")?null:a)||"100%":v.width()+"px",e.wrap('<div class="fr-img-space-wrap"><span '+(w.browser.mozilla?"":'contenteditable="false"')+'class="fr-img-caption '+v.attr("class")+'" style="'+(w.opts.useClasses?"":e.attr("style"))+'" draggable="false"></span><p class="fr-img-space-wrap2">&nbsp;</p></div>'),e.wrap('<span class="fr-img-wrap"></span>'),v.after('<span class="fr-inner"'.concat(w.browser.mozilla?"":' contenteditable="true"',">").concat(dt.START_MARKER).concat(w.language.translate("Image Caption")).concat(dt.END_MARKER,"</span>")),v.removeAttr("class").removeAttr("style").removeAttr("width"),v.parents(".fr-img-caption").css("width",r),z(!0),w.selection.restore()):(e=O(),v.insertAfter(e),v.attr("class",e.attr("class").replace("fr-img-caption","")).attr("style",e.attr("style")),e.remove(),R(v))},refreshEmbedButton:function(e){var t=w.popups.get("filesManager.insert");t&&t.find(".fr-files-embed-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},insertEmbed:function(e){if(0===(e=void 0===e?w.popups.get("filesManager.insert").find(".fr-files-embed-layer textarea").val()||"":e).length||!dt.VIDEO_EMBED_REGEX.test(e)&&!dt.IMAGE_EMBED_REGEX.test(e))de(w.language.translate("Something went wrong. Please try again.")),dt.VIDEO_EMBED_REGEX.test(e)&&w.events.trigger("video.codeError",[e]);else{dt.VIDEO_EMBED_REGEX.test(e)?(t="video",i=w.opts.videoSplitHTML):dt.IMAGE_EMBED_REGEX.test(e)&&(t="image",i=w.opts.imageSplitHTML),w.events.focus(!0),w.selection.restore();var t,n=!1;if(v&&(Je(),n=!0),w.html.insert('<span id="fr-inserted-file" contenteditable="true" draggable="true" class="fr-'.concat(t,' fr-jiv fr-deletable">').concat(e,"</span>"),!1,i),w.popups.hide("filesManager.insert"),(e=w.$el.find(".fr-jiv")).removeClass("fr-jiv"),"video"==t){e.toggleClass("fr-rv",w.opts.videoResponsive);{var i=e;var a=w.opts.videoDefaultDisplay;var r=w.opts.videoDefaultAlign;!w.opts.htmlUntouched&&w.opts.useClasses?(i.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"),i.addClass("fr-fv".concat(r[0]," fr-dv").concat(a[0]))):"inline"==a?(i.css({display:"inline-block"}),"center"==r?i.css({"float":"none"}):"left"==r?i.css({"float":"left"}):i.css({"float":"right"})):(i.css({display:"block",clear:"both"}),"left"==r?i.css({textAlign:"left"}):"right"==r?i.css({textAlign:"right"}):i.css({textAlign:"center"}))}e.toggleClass("fr-draggable",w.opts.videoMove),w.events.trigger(n?"video.replaced":"video.inserted",[e])}"image"==t&&(ot(e,w.opts.imageDefaultDisplay,w.opts.imageDefaultAlign),e.find("img").removeClass("fr-dii"),e.find("img").addClass("fr-dib"),e.toggleClass("fr-draggable",w.opts.imageMove),w.events.trigger(n?"image.replaced":"image.inserted",[e]))}},hasCaption:$,exitEdit:z,edit:R,cancelFileInsert:function(){this.file_manager_dialog_open=!1,h.forEach(function(e,t){4!=e.readyState&&(e.abort(),o(t))});var e=w.popups.get("filesManager.insert");e.find(".fr-progress-bar").removeClass("fr-display-block").addClass("fr-none"),e.find('.fr-command[data-cmd="filesUpload"]').removeClass("fr-disabled"),e.find('.fr-command[data-cmd="filesByURL"]').removeClass("fr-disabled"),e.find('.fr-command[data-cmd="filesEmbed"]').removeClass("fr-disabled"),N=0,h=new Map,b=new Map,le(),w.popups.hide("filesManager.insert")},minimizePopup:function(e){this.file_manager_dialog_open=!1,w.popups.hide("filesManager.insert"),le()},editImage:Be,saveImage:function(e){var t=k.get(l);t.link=window.URL.createObjectURL(new Blob(e,{type:"image/png"})),k.set(l,t)},_showErrorMessage:de,_showFileErrorMessage:ce,getFileThumbnail:Ae,deleteFile:o,checkAutoplay:Pe,checkInsertAllState:_,_disableInsertCheckbox:oe,_getFileType:B,isChildWindowOpen:function(){return F},setChildWindowState:function(e){e!==undefined&&(F=e)},resetAllFilesCheckbox:le}},dt.DefineIcon("insertFiles",{NAME:"image",SVG_KEY:"fileManager"}),dt.RegisterShortcut(dt.KEYCODE.P,"insertFiles",null,"P"),dt.RegisterCommand("insertFiles",{title:"Insert Files",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("filesManager.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("filesManager.insert")):this.filesManager.showInsertPopup()},plugin:"filesManager"}),dt.DefineIcon("cloudIcon",{NAME:"cloudIcon",SVG_KEY:"uploadFiles"}),dt.DefineIcon("filesUpload",{NAME:"uploadFiles",SVG_KEY:"uploadFiles"}),dt.RegisterCommand("filesUpload",{title:"Upload Files",undo:!1,focus:!1,toggle:!0,callback:function(){this.filesManager.showLayer("files-upload")},refresh:function(e){this.filesManager.refreshUploadButton(e)}}),dt.DefineIcon("filesByURL",{NAME:"link",SVG_KEY:"insertLink"}),dt.RegisterCommand("filesByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.filesManager.showLayer("files-by-url")},refresh:function(e){this.filesManager.refreshByURLButton(e)}}),dt.DefineIcon("filesEmbed",{NAME:"code",SVG_KEY:"codeView"}),dt.RegisterCommand("filesEmbed",{title:"Embedded Code",undo:!1,focus:!1,toggle:!0,callback:function(){this.filesManager.showLayer("files-embed")},refresh:function(e){this.filesManager.refreshEmbedButton(e)}}),dt.DefineIcon("insertAll",{NAME:"insertAll",SVG_KEY:"fileInsert"}),dt.RegisterCommand("insertAll",{title:"Insert",undo:!1,focus:!1,toggle:!0,disabled:!0,callback:function(){this.filesManager.insertAllFiles()}}),dt.DefineIcon("deleteAll",{NAME:"remove",SVG_KEY:"remove"}),dt.RegisterCommand("deleteAll",{title:"Delete",undo:!1,focus:!1,toggle:!0,disabled:!0,callback:function(){this.filesManager.deleteAllFiles()}}),dt.DefineIcon("cancel",{NAME:"cancel",SVG_KEY:"cancel"}),dt.RegisterCommand("cancel",{title:"Cancel",undo:!1,focus:!1,toggle:!0,callback:function(){this.filesManager.cancelFileInsert()},refresh:function(e){}}),dt.DefineIcon("minimize",{NAME:"minimize",SVG_KEY:"minimize"}),dt.RegisterCommand("minimize",{title:"Minimize",undo:!1,focus:!1,toggle:!0,callback:function(){this.filesManager.minimizePopup("image.insert",!0)},refresh:function(e){this.filesManager.refreshEmbedButton(e)}}),dt.RegisterCommand("filesInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.filesManager.insertByURL()},refresh:function(e){e.text(this.language.translate("Add"))}}),dt.RegisterCommand("imageInsertByUpload",{title:"Insert",undo:!0,refreshAfterCallback:!1,callback:function(e,t){},refresh:function(e){}}),dt.RegisterCommand("viewImage",{title:"View Image",undo:!0,refreshAfterCallback:!1,callback:function(e,t){},refresh:function(e){}}),dt.RegisterCommand("insertEmbed",{undo:!0,focus:!0,callback:function(){this.filesManager.insertEmbed(),this.popups.get("filesManager.insert").find("textarea")[0].value="",this.popups.get("filesManager.insert").find("textarea").removeClass("fr-not-empty")}}),dt.RegisterCommand("filesDismissError",{title:"OK",undo:!1,callback:function(){this.filesManager.hideProgressBar(!0)}})});