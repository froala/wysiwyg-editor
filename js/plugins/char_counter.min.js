/*!
 * froala_editor v4.6.1 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2025 Froala Labs
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("froala-editor")):"function"==typeof define&&define.amd?define(["froala-editor"],t):t(e.FroalaEditor)}(this,function(d){"use strict";d=d&&d.hasOwnProperty("default")?d["default"]:d,Object.assign(d.DEFAULTS,{charCounterMax:-1,charCounterCount:!0}),d.PLUGINS.charCounter=function(s){var n,r=s.$,u=function u(){return(s.opts.iframe&&s.markdown&&s.markdown.isEnabled()?s.$el.text()||"":s.el.textContent||"").replace(/\u200B/g,"").length};function e(e){var t=s.opts.charCounterMax;if(t<0)return!0;var n=u();if("keydown"===e.type){if(n<t)return!0;var r=e.which;if(!s.keys.ctrlKey(e)&&s.keys.isCharacter(r)||r===d.KEYCODE.IME)return e.preventDefault(),e.stopPropagation(),s.events.trigger("charCounter.exceeded"),!1}var o=e.originalEvent&&e.originalEvent.inputType||"";if(/delete|historyUndo|historyRedo/.test(o))return!0;if("beforeinput"===e.type){var a=e.data||e.originalEvent&&e.originalEvent.data||e.originalEvent&&e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.getData("text")||"",i=n-s.win.getSelection().toString().length+a.length;if(t-n<=0||t<i)return e.preventDefault(),e.stopPropagation(),s.events.trigger("charCounter.exceeded"),!1}return"input"===e.type&&t<n&&(s.selection.save(),function c(e,t){var n,r="",o=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),a=!0;for(;(n=o.nextNode())&&r.length<t;){var i=t-r.length;if(n.textContent.length>i){n.textContent=n.textContent.slice(0,i),a=!1;break}r+=n.textContent}a&&(n=o.previousNode());for(;n=o.nextNode();)n.textContent=""}(s.el,t),s.selection.restore()),!0}function t(e){return s.opts.charCounterMax<0?e:r("<div>").html(e).text().length+u()<=s.opts.charCounterMax?e:(s.events.trigger("charCounter.exceeded"),"")}function o(e,t,n){return s.opts.charCounterMax<0||(e.includes('<span class="fr-emoticon')||e.includes('<i class="fa ')?!(u()>=s.opts.charCounterMax)||(s.events.trigger("charCounter.exceeded"),!1):r("<div>").html(e).text().length+u()<=s.opts.charCounterMax||(s.events.trigger("charCounter.exceeded"),!1))}function a(){if(s.opts.charCounterCount){var e=u()+(0<s.opts.charCounterMax?"/"+s.opts.charCounterMax:"");n.text("".concat(s.language.translate("Characters")," : ").concat(e)),s.opts.toolbarBottom&&n.css("margin-bottom",s.$tb.outerHeight(!0));var t=s.$wp.get(0).offsetWidth-s.$wp.get(0).clientWidth;0<=t&&("rtl"==s.opts.direction?n.css("margin-left",t):n.css("margin-right",t))}}return{_init:function i(){return!!s.$wp&&!!s.opts.charCounterCount&&((n=r(document.createElement("span")).attr("class","fr-counter")).css("bottom",s.$wp.css("border-bottom-width")),s.$second_tb?s.$second_tb.append(n):s.$wp.append(n),s.events.on("keydown beforeinput input",e,!0),s.events.on("paste.afterCleanup",t),s.events.on("keyup contentChanged input",function(){s.events.trigger("charCounter.update")}),s.events.on("html.beforeInsert",o),s.events.on("charCounter.update",a),s.events.trigger("charCounter.update"),void s.events.on("destroy",function(){r(s.o_win).off("resize.char".concat(s.id)),n.removeData().remove(),n=null}))},count:u}}});